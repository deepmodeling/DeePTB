<!doctypehtml><html data-content_root=../../ lang=en><head><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0 name=viewport><meta content=width=device-width,initial-scale=1 name=viewport><title>DeePTB-E3: Bulk Silicon — DeePTB  documentation</title><script data-cfasync=false>document.documentElement.dataset.mode=localStorage.getItem(`mode`)||``;document.documentElement.dataset.theme=localStorage.getItem(`theme`)||``</script><link href=../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b rel=stylesheet><link href=../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b rel=stylesheet><link href=../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b rel=stylesheet><link href=../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b rel=stylesheet><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2 rel=preload type=font/woff2><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2 rel=preload type=font/woff2><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2 rel=preload type=font/woff2><link href=../../_static/pygments.css?v=8f2a1f02 rel=stylesheet><link href=../../_static/styles/sphinx-book-theme.css?v=eba8b062 rel=stylesheet><link href=../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css rel=stylesheet><link href=../../_static/banner.css?v=f1520836 rel=stylesheet><link as=script href=../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b rel=preload><link as=script href=../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b rel=preload><script src=../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b></script><script src=../../_static/documentation_options.js?v=9eb32ce0></script><script src=../../_static/doctools.js?v=9bcbadda></script><script src=../../_static/sphinx_highlight.js?v=dc90522c></script><script src=../../_static/scripts/sphinx-book-theme.js?v=887ef09a></script><script src=../../_static/banner.js?v=a6a668d4></script><script>DOCUMENTATION_OPTIONS.pagename=`quick_start/hands_on/e3tb_hands_on`</script><link href=../../genindex.html rel=index title=Index><link href=../../search.html rel=search title=Search><meta content=width=device-width,initial-scale=1 name=viewport><meta content=en name=docsearch:language><link href=https://unpkg.com/ rel=preconnect><link href=https://unpkg.com/@njzjz/icons@0.0.5/logos/deepmodeling.svg rel=icon type=image/png><div class="container-fluid header-holder tutorials-header"id=header-holder><div class=container><div class=header-container><a aria-label=deepmodeling class=header-logo href=https://deepmodeling.com></a><div class=main-menu><ul><li><a href=https://deepmodeling.com>Home</a></li><li><a href=https://blogs.deepmodeling.com>Blog</a></li><li><a href=https://tutorials.deepmodeling.com>Tutorials</a></li><li class="active docs-active"><div class=resources-dropdown data-toggle=resources-dropdown id=resourcesDropdownButton><a class="resource-option with-down-orange-arrow"href=https://docs.deepmodeling.com/> Docs </a><div class=resources-dropdown-menu><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/deepmd/> <span class=dropdown-title>DeePMD-kit</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/dpgen/> <span class=dropdown-title>DP-GEN</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/dpdata/> <span class=dropdown-title>dpdata</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/dpdispatcher/> <span class=dropdown-title>DPDispatcher</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://abacus.deepmodeling.com/> <span class=dropdown-title>ABACUS</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://deepflame.deepmodeling.com/> <span class=dropdown-title>DeepFlame</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/dpti/> <span class=dropdown-title>DPTI</span> <p></p> </a></div></div></li><li><a href=https://blogs.deepmodeling.com/papers/>Publications</a></li><li><a href=https://github.com/deepmodeling>GitHub</a></li></ul></div><a class=main-menu-open-button data-behavior=open-mobile-menu href=#></a></div></div></div><div class=mobile-main-menu><div class=container-fluid><div class=container><div class=mobile-main-menu-header-container><a aria-label=deepmodeling class=header-logo href=https://deepmodeling.com></a><a class=main-menu-close-button data-behavior=close-mobile-menu href=#></a></div></div></div><div class=mobile-main-menu-links-container><div class=main-menu><ul><li><a href=https://deepmodeling.com>Home</a></li><li><a href=https://blogs.deepmodeling.com>Blog</a></li><li><a href=https://tutorials.deepmodeling.com>Tutorials</a></li><li><a href=https://docs.deepmodeling.com/>Docs</a></li><li><a href=https://blogs.deepmodeling.com/papers/>Publications</a></li><li><a href=https://github.com/deepmodeling>GitHub</a></li></ul></div></div></div></head><body data-bs-root-margin="0px 0px -60%"data-bs-spy=scroll data-bs-target=.bd-toc-nav data-default-mode data-offset=180><div class="skip-link d-print-none"id=pst-skip-link><a href=#main-content>Skip to main content</a></div><div id=pst-scroll-pixel-helper></div><button class="btn rounded-pill"id=pst-back-to-top type=button><i class="fa-solid fa-arrow-up"></i>Back to top</button><input class=sidebar-toggle id=pst-primary-sidebar-checkbox type=checkbox><label class="overlay overlay-primary"for=pst-primary-sidebar-checkbox></label><input class=sidebar-toggle id=pst-secondary-sidebar-checkbox type=checkbox><label class="overlay overlay-secondary"for=pst-secondary-sidebar-checkbox></label><div class=search-button__wrapper><div class=search-button__overlay></div><div class=search-button__search-container><form class="bd-search d-flex align-items-center"action=../../search.html><i class="fa-solid fa-magnifying-glass"></i><input aria-label=Search... autocapitalize=off autocomplete=off autocorrect=off class=form-control id=search-input name=q placeholder=Search... spellcheck=false type=search><span class=search-button__kbd-shortcut><kbd class=kbd-shortcut__modifier>Ctrl</kbd>+<kbd>K</kbd></span></form></div></div><div class="pst-async-banner-revealer d-none"><aside aria-label="Version warning"class="d-none d-print-none"id=bd-header-version-warning></aside></div><header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none"></header><div class=bd-container><div class="bd-container__inner bd-page-width"><div class="bd-sidebar-primary bd-sidebar"><div class="sidebar-header-items sidebar-primary__section"></div><div class="sidebar-primary-items__start sidebar-primary__section"><div class=sidebar-primary-item><a class="navbar-brand logo"href=../../index.html> <img alt="DeePTB  documentation - Home"class="logo__image only-light"src=../../_static/deeptb-logo.svg> <script>document.write(`<img src="../../_static/deeptb-logo.svg" class="logo__image only-dark" alt="DeePTB  documentation - Home"/>`)</script> </a></div><div class=sidebar-primary-item><script>document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `)</script></div><div class=sidebar-primary-item><nav class="bd-links bd-docs-nav"aria-label=Main><div class="bd-toc-item navbar-nav active"><p aria-level=2 class=caption role=heading><span class=caption-text>Quick Start</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal"href=../easy_install.html>Installation Guide</a></li><li class=toctree-l1><a class="reference internal"href=../input.html>Brief Intro. to Inputs and Commands</a></li><li class="toctree-l1 has-children"><a class="reference internal"href=index.html>A quick Example</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=tutorial1_base_sk.html>Tutorial 1: deeptb-sk baseline model</a></li><li class=toctree-l2><a class="reference internal"href=tutorial2_data.html>Tutorial 2: data preparation for deeptb-sk model</a></li><li class=toctree-l2><a class="reference internal"href=tutorial3_train_si.html>Tutorial 3: Training deeptb-sk model for Silicon</a></li><li class=toctree-l2><a class="reference internal"href=tutorial4_E3_si.html>Tutorial 4: Training deeptb-e3 model for Silicon</a></li></ul></details></li><li class=toctree-l1><a class="reference internal"href=../basic_api.html>Basic API</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>INPUT TAG</span></p><ul class="nav bd-sidenav"><li class="toctree-l1 has-children"><a class="reference internal"href=../../input_params/index.html>Full Input Parameters</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../../input_params/common_options.html>Common Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/train_options.html>Train Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/model_options.html>Model Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/data_options.html>Data Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/run_options.html>Run Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/set_info.html>Set Info</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Advanced</span></p><ul class="nav bd-sidenav"><li class="toctree-l1 has-children"><a class="reference internal"href=../../advanced/sktb/index.html>DeePTB-SK Advanced</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../../advanced/sktb/dftb.html>DFTB SK Files to DeePTB Model</a></li><li class=toctree-l2><a class="reference internal"href=../../advanced/sktb/dptb_env.html>Environment-dependent TB</a></li><li class=toctree-l2><a class="reference internal"href=../../advanced/sktb/nrl_tb.html>NRL-TB paramererization</a></li><li class=toctree-l2><a class="reference internal"href=../../advanced/sktb/soc.html>Spin-orbit coupling</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal"href=../../advanced/e3tb/index.html>DeePTB-E3 Advanced</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../../advanced/e3tb/advanced_input.html>More on Input Parameters</a></li><li class=toctree-l2><a class="reference internal"href=../../advanced/e3tb/data_preparation.html>Data Preparation</a></li><li class=toctree-l2><a class="reference internal"href=../../advanced/e3tb/loss_analysis.html>Loss Analysis</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal"href=../../advanced/elec_properties/index.html>Electronic Properties and Outputs</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../../advanced/elec_properties/band.html>Band structure</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal"href=../../advanced/interface/index.html>Interfaces to Other Softwares</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../../advanced/interface/TBPLAS.html>TBPLAS</a></li><li class=toctree-l2><a class="reference internal"href=../../advanced/interface/TBtrans.html>TBtrans</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Citing DeePTB</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal"href=../../CITATIONS.html>How to Cite</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Developing Team</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal"href=../../DevelopingTeam.html>Development Team</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Community</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal"href=../../community/contribution_guide.html>DeePTB Contribution Guide</a></li><li class=toctree-l1><a class="reference internal"href=../../CONTRIBUTING.html>Contributing to DeePTB</a></li></ul></div></nav></div></div><div class="sidebar-primary-items__end sidebar-primary__section"></div><div id=rtd-footer-container></div></div><main class=bd-main id=main-content role=main><div class=sbt-scroll-pixel-helper></div><div class=bd-content><div class=bd-article-container><div class="bd-header-article d-print-none"><div class="header-article-items header-article__inner"><div class=header-article-items__start><div class=header-article-item><button class="sidebar-toggle primary-toggle btn btn-sm"title="Toggle primary sidebar"data-bs-placement=bottom data-bs-toggle=tooltip><span class="fa-solid fa-bars"></span></button></div></div><div class=header-article-items__end><div class=header-article-item><div class=article-header-buttons><div class="dropdown dropdown-download-buttons"><button aria-label="Download this page"class="btn dropdown-toggle"aria-expanded=false data-bs-toggle=dropdown type=button><i class="fas fa-download"></i></button><ul class=dropdown-menu><li><a class="btn btn-sm btn-download-source-button dropdown-item"title="Download source file"data-bs-placement=left data-bs-toggle=tooltip href=../../_sources/quick_start/hands_on/e3tb_hands_on.md target=_blank> <span class=btn__icon-container> <i class="fas fa-file"></i> </span> <span class=btn__text-container>.md</span> </a></li><li><button class="btn btn-sm btn-download-pdf-button dropdown-item"title="Print to PDF"data-bs-placement=left data-bs-toggle=tooltip onclick=window.print()><span class=btn__icon-container> <i class="fas fa-file-pdf"></i> </span> <span class=btn__text-container>.pdf</span></button></li></ul></div><button class="btn btn-sm btn-fullscreen-button"title="Fullscreen mode"data-bs-placement=bottom data-bs-toggle=tooltip onclick=toggleFullScreen()><span class=btn__icon-container> <i class="fas fa-expand"></i> </span></button><script>document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`)</script><script>document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`)</script></div></div></div></div></div><div class=onlyprint id=jb-print-docs-body><h1>DeePTB-E3: Bulk Silicon</h1><div id=print-main-content><div id=jb-print-toc></div></div></div><div id=searchbox></div><article class=bd-article><section class="tex2jax_ignore mathjax_ignore"id=deeptb-e3-bulk-silicon><h1>DeePTB-E3: Bulk Silicon<a title="Link to this heading"class=headerlink href=#deeptb-e3-bulk-silicon>#</a></h1><p>DeePTB supports training an E3-equalvariant model to predict DFT Hamiltonian, density and overlap matrix under LCAO basis. Here, cubic-phase bulk silicon has been chosen as a quick start example.</p><p>Silicon is a chemical element; it has the symbol Si and atomic number 14. It is a hard, brittle crystalline solid with a blue-grey metallic lustre, and is a tetravalent metalloid and semiconductor (Shut up). The prepared files are located in:</p><div class="highlight-default notranslate"><div class=highlight><pre><span></span>deeptb/examples/e3/
|-- data
|   |-- Si64.0
|   |   |-- atomic_numbers.dat
|   |   |-- basis.dat
|   |   |-- cell.dat
|   |   |-- hamiltonians.h5
|   |   |-- kpoints.npy
|   |   |-- overlaps.h5
|   |   |-- pbc.dat
|   |   `-- positions.dat
|   `-- info.json
`-- input.json
</pre></div></div><p>We prepared one frame of silicon cubic bulk structure as an example. The data was computed using DFT software ABACUS, with an LCAO basis set containing 1 <code class="docutils literal notranslate"><span class=pre>s</span></code> and 1 <code class="docutils literal notranslate"><span class=pre>p</span></code> orbital. We now have an info.json file like:</p><div class="highlight-JSON notranslate"><div class=highlight><pre><span></span><span class=p>{</span>
<span class=w>        </span><span class=nt>"nframes"</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"pos_type"</span><span class=p>:</span><span class=w> </span><span class=s2>"cart"</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"pbc"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w> </span><span class=err>#</span><span class=w> </span><span class=err>same</span><span class=w> </span><span class=err>as</span><span class=w> </span><span class=p>[</span><span class=kc>true</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>]</span>
<span class=p>}</span>
</pre></div></div><p>The <code class="docutils literal notranslate"><span class=pre>input_short.json</span></code> file contains the least number of parameters that are required to start training the <strong>DeePTB-E3</strong> model, we list some important parameters:</p><div class="highlight-json notranslate"><div class=highlight><pre><span></span><span class=nt>"common_options"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nt>"basis"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>"Si"</span><span class=p>:</span><span class=w> </span><span class=s2>"1s1p"</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>"device"</span><span class=p>:</span><span class=w> </span><span class=s2>"cpu"</span><span class=p>,</span>
<span class=w>    </span><span class=nt>"overlap"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
<span class=p>}</span>
</pre></div></div><p>In <code class="docutils literal notranslate"><span class=pre>common_options</span></code>, here are the essential parameters. The <code class="docutils literal notranslate"><span class=pre>basis</span></code> should align with the DFT calculation, so 1 <code class="docutils literal notranslate"><span class=pre>s</span></code> and 1 <code class="docutils literal notranslate"><span class=pre>p</span></code> orbital would result in a <code class="docutils literal notranslate"><span class=pre>1s1p</span></code> basis. The cutoff radius for the orbital is 7au, which means the largest bond would be less than 14 au. Therefore, the <code class="docutils literal notranslate"><span class=pre>r_max</span></code>, which equals to the maximum bond length, should be set as 7.4. The <code class="docutils literal notranslate"><span class=pre>device</span></code> can either be <code class="docutils literal notranslate"><span class=pre>cpu</span></code> or <code class="docutils literal notranslate"><span class=pre>cuda</span></code>, but we highly recommend using <code class="docutils literal notranslate"><span class=pre>cuda</span></code> if GPU is available. The <code class="docutils literal notranslate"><span class=pre>overlap</span></code> tag controls whether to fit the overlap matrix together. Benefitting from our parameterization, the fitting overlap only brings negligible costs, but is very convenient when using the model.</p><p>Here comes the <code class="docutils literal notranslate"><span class=pre>model_options</span></code>:</p><div class="highlight-json notranslate"><div class=highlight><pre><span></span><span class=nt>"model_options"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nt>"embedding"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>"method"</span><span class=p>:</span><span class=w> </span><span class=s2>"slem"</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"r_max"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>"Si"</span><span class=p>:</span><span class=w> </span><span class=mf>7.4</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>"irreps_hidden"</span><span class=p>:</span><span class=w> </span><span class=s2>"32x0e+32x1o+16x2e"</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"n_layers"</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"avg_num_neighbors"</span><span class=p>:</span><span class=w> </span><span class=mi>51</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"tp_radial_emb"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>"prediction"</span><span class=p>:{</span>
<span class=w>        </span><span class=nt>"method"</span><span class=p>:</span><span class=w> </span><span class=s2>"e3tb"</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"neurons"</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=mi>64</span><span class=p>,</span><span class=mi>64</span><span class=p>]</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</pre></div></div><p>The <code class="docutils literal notranslate"><span class=pre>model_options</span></code> contains <code class="docutils literal notranslate"><span class=pre>embedding</span></code> and <code class="docutils literal notranslate"><span class=pre>prediction</span></code> parts, denoting the construction of representation for equivariant features, and arranging and rescaling the features into quantum operators sub-blocks such as Hamiltonian, density and overlap matrix.</p><p>In <code class="docutils literal notranslate"><span class=pre>embedding</span></code>, the <code class="docutils literal notranslate"><span class=pre>method</span></code> supports <code class="docutils literal notranslate"><span class=pre>slem</span></code> and <code class="docutils literal notranslate"><span class=pre>lem</span></code> for now, where <code class="docutils literal notranslate"><span class=pre>slem</span></code> has a strictly localized dependency, which has better transferability and data efficiency, while <code class="docutils literal notranslate"><span class=pre>lem</span></code> has an adjustable semi-local dependency, which has better representation capacity, but would require a little more data. <code class="docutils literal notranslate"><span class=pre>r_max</span></code> should align with the one defined in <code class="docutils literal notranslate"><span class=pre>info.json</span></code>.</p><p>For <code class="docutils literal notranslate"><span class=pre>irreps_hidden</span></code>, this parameter defines the size of the hidden equivariant irreducible representation, which decides most of the power of the model. There are certain rules to define this param. But for quick usage, we provide a tool to do basis analysis to extract essential irreps.</p><div class="highlight-IPYTHON notranslate"><div class=highlight><pre><span></span><span class=n>In</span> <span class=p>[</span><span class=mi>1</span><span class=p>]:</span> <span class=kn>from</span><span class=w> </span><span class=nn>dptb.data</span><span class=w> </span><span class=kn>import</span> <span class=n>OrbitalMapper</span>

<span class=n>In</span> <span class=p>[</span><span class=mi>2</span><span class=p>]:</span> <span class=n>idp</span> <span class=o>=</span> <span class=n>OrbitalMapper</span><span class=p>(</span><span class=n>basis</span><span class=o>=</span><span class=p>{</span><span class=s2>"Si"</span><span class=p>:</span> <span class=s2>"1s1p"</span><span class=p>})</span>

<span class=n>In</span> <span class=p>[</span><span class=mi>3</span><span class=p>]:</span> <span class=n>idp</span><span class=o>.</span><span class=n>get_irreps_ess</span><span class=p>()</span>
<span class=n>Out</span><span class=p>[</span><span class=mi>3</span><span class=p>]:</span> <span class=mi>2</span><span class=n>x0e</span><span class=o>+</span><span class=mi>1</span><span class=n>x1o</span><span class=o>+</span><span class=mi>1</span><span class=n>x2e</span>
</pre></div></div><p>This is the number of independent irreps contains in the basis. Irreps configured should be multiple times of this essential irreps. The number can varies with a pretty large freedom, but the all the types, for example (“0e”, “1o”, “2e”) here, should be included for all. We usually take a descending order starts from “32”, “64”, or “128” for the first “0e” and decay by half for latter high order irreps. For general rules of the irreps, user can read the advance topics in the doc, but for now, you are safe to ignore!</p><p>In <code class="docutils literal notranslate"><span class=pre>prediction</span></code>, we should use the <code class="docutils literal notranslate"><span class=pre>e3tb</span></code> method to require the model output features using <strong>DeePTB-E3</strong> format. The neurons are defined for a simple MLP to predict the slater-koster-like parameters for predicting the overlap matrix, for which [64,64] is usually fine.</p><p>Now everything is prepared! We can using the following command and we can train the first model:</p><div class="highlight-bash notranslate"><div class=highlight><pre><span></span><span class=nb>cd</span><span class=w> </span>deeptb/examples/e3
dptb<span class=w> </span>train<span class=w> </span>./input_short.json<span class=w> </span>-o<span class=w> </span>./e3_silicon
</pre></div></div><p>Here <code class="docutils literal notranslate"><span class=pre>-o</span></code> indicate the output directory. During the fitting procedure, we can see the loss curve of hBN is decrease consistently. When finished, we get the fitting results in folders <code class="docutils literal notranslate"><span class=pre>e3_silicon</span></code>.</p><p>By modify the checkpoint path in the script <code class="docutils literal notranslate"><span class=pre>plot_band.py</span></code> and running it, the band structure can be obtained in <code class="docutils literal notranslate"><span class=pre>./band_plot</span></code>:</p><div class="highlight-bash notranslate"><div class=highlight><pre><span></span>python<span class=w> </span>plot_band.py
</pre></div></div><p>or just using the command line</p><div class="highlight-bash notranslate"><div class=highlight><pre><span></span>dptb<span class=w> </span>run<span class=w> </span>./band.json<span class=w> </span>-i<span class=w> </span>./e3_silicon/checkpoint/nnenv.best.pth<span class=w> </span>-o<span class=w> </span>./band_plot
</pre></div></div><p><img alt=band_e3_Si src=https://raw.githubusercontent.com/deepmodeling/DeePTB/main/docs/img/silicon_e3_band.png></p><p>Now you know how to train a <strong>DeePTB-E3</strong> model for Hamiltonian and overlap matrix. For better usage, we encourage the user to read the full input parameters for the <strong>DeePTB-E3</strong> model. Also, the <strong>DeePTB</strong> model supports several post-process tools, and the user can directly extract any predicted properties just using a few lines of code. Please see the basis_api for details.</p></section></article><footer class="prev-next-footer d-print-none"><div class=prev-next-area></div></footer></div></div><footer class=bd-footer-content><div class="bd-footer-content__inner container"><div class=footer-item><p class=component-author>By DeePTB</p></div><div class=footer-item><p class=copyright>© Copyright 2023, DeePTB. <br></p></div><div class=footer-item></div><div class=footer-item><div class=extra_footer><p><a href=https://beian.miit.gov.cn target=_blank>京ICP备20010051号-8</a></p></div></div></div></footer></main></div></div><script src=../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b></script><script src=../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b></script><footer class=bd-footer></footer></body></html>