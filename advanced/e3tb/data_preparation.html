<!doctype html><html data-content_root=../../ lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="width=device-width,initial-scale=1" name=viewport><title>Data Preparation — DeePTB  documentation</title><script data-cfasync=false>document.documentElement.dataset.mode=localStorage.getItem(`mode`)||``,document.documentElement.dataset.theme=localStorage.getItem(`theme`)||``;</script><link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel=stylesheet><link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel=stylesheet><link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel=stylesheet><link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel=stylesheet><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2 rel=preload type=font/woff2><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2 rel=preload type=font/woff2><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2 rel=preload type=font/woff2><link href="../../_static/pygments.css?v=8f2a1f02" rel=stylesheet><link href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" rel=stylesheet><link href=../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css rel=stylesheet><link href="../../_static/banner.css?v=f1520836" rel=stylesheet><link href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" as=script rel=preload><link href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" as=script rel=preload><script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script><script src="../../_static/documentation_options.js?v=9eb32ce0"></script><script src="../../_static/doctools.js?v=9bcbadda"></script><script src="../../_static/sphinx_highlight.js?v=dc90522c"></script><script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script><script src="../../_static/banner.js?v=a6a668d4"></script><script>DOCUMENTATION_OPTIONS.pagename=`advanced/e3tb/data_preparation`;</script><link href=../../genindex.html rel=index title=Index><link href=../../search.html rel=search title=Search><link title="Loss Analysis" href=loss_analysis.html rel=next><link title="More on Input Parameters" href=advanced_input.html rel=prev><meta content="width=device-width,initial-scale=1" name=viewport><meta content=en name=docsearch:language><link href=https://unpkg.com/ rel=preconnect><link href=https://unpkg.com/@njzjz/icons@0.0.5/logos/deepmodeling.svg rel=icon type=image/png><div class="container-fluid header-holder tutorials-header" id=header-holder><div class=container><div class=header-container><a aria-label=deepmodeling class=header-logo href=https://deepmodeling.com></a><div class=main-menu><ul><li><a href=https://deepmodeling.com>Home</a></li><li><a href=https://blogs.deepmodeling.com>Blog</a></li><li><a href=https://tutorials.deepmodeling.com>Tutorials</a></li><li class="active docs-active"><div class=resources-dropdown data-toggle=resources-dropdown id=resourcesDropdownButton><a class="resource-option with-down-orange-arrow" href=https://docs.deepmodeling.com/> Docs </a><div class=resources-dropdown-menu><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/deepmd/> <span class=dropdown-title>DeePMD-kit</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/dpgen/> <span class=dropdown-title>DP-GEN</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/dpdata/> <span class=dropdown-title>dpdata</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/dpdispatcher/> <span class=dropdown-title>DPDispatcher</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://abacus.deepmodeling.com/> <span class=dropdown-title>ABACUS</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://deepflame.deepmodeling.com/> <span class=dropdown-title>DeepFlame</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/dpti/> <span class=dropdown-title>DPTI</span> <p></p> </a></div></div></li><li><a href=https://blogs.deepmodeling.com/papers/>Publications</a></li><li><a href=https://github.com/deepmodeling>GitHub</a></li></ul></div><a class=main-menu-open-button data-behavior=open-mobile-menu href=#></a></div></div></div><div class=mobile-main-menu><div class=container-fluid><div class=container><div class=mobile-main-menu-header-container><a aria-label=deepmodeling class=header-logo href=https://deepmodeling.com></a><a class=main-menu-close-button data-behavior=close-mobile-menu href=#></a></div></div></div><div class=mobile-main-menu-links-container><div class=main-menu><ul><li><a href=https://deepmodeling.com>Home</a></li><li><a href=https://blogs.deepmodeling.com>Blog</a></li><li><a href=https://tutorials.deepmodeling.com>Tutorials</a></li><li><a href=https://docs.deepmodeling.com/>Docs</a></li><li><a href=https://blogs.deepmodeling.com/papers/>Publications</a></li><li><a href=https://github.com/deepmodeling>GitHub</a></li></ul></div></div></div></head><body data-bs-root-margin="0px 0px -60%" data-bs-spy=scroll data-bs-target=.bd-toc-nav data-default-mode data-offset=180><div class="skip-link d-print-none" id=pst-skip-link><a href=#main-content>Skip to main content</a></div><div id=pst-scroll-pixel-helper></div><button class="btn rounded-pill" id=pst-back-to-top type=button><i class="fa-solid fa-arrow-up"></i>Back to top</button><input class=sidebar-toggle id=pst-primary-sidebar-checkbox type=checkbox><label class="overlay overlay-primary" for=pst-primary-sidebar-checkbox></label><input class=sidebar-toggle id=pst-secondary-sidebar-checkbox type=checkbox><label class="overlay overlay-secondary" for=pst-secondary-sidebar-checkbox></label><div class=search-button__wrapper><div class=search-button__overlay></div><div class=search-button__search-container><form class="bd-search d-flex align-items-center" action=../../search.html><i class="fa-solid fa-magnifying-glass"></i><input aria-label=Search... autocapitalize=off autocomplete=off autocorrect=off class=form-control id=search-input name=q placeholder=Search... spellcheck=false type=search><span class=search-button__kbd-shortcut><kbd class=kbd-shortcut__modifier>Ctrl</kbd>+<kbd>K</kbd></span></form></div></div><div class="pst-async-banner-revealer d-none"><aside aria-label="Version warning" class="d-none d-print-none" id=bd-header-version-warning></aside></div><header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none"></header><div class=bd-container><div class="bd-container__inner bd-page-width"><div class="bd-sidebar-primary bd-sidebar"><div class="sidebar-header-items sidebar-primary__section"></div><div class="sidebar-primary-items__start sidebar-primary__section"><div class=sidebar-primary-item><a class="navbar-brand logo" href=../../index.html> <img alt="DeePTB  documentation - Home" class="logo__image only-light" src=../../_static/deeptb-logo.png> <script>document.write(`<img src="../../_static/deeptb-logo.png" class="logo__image only-dark" alt="DeePTB  documentation - Home"/>`);</script> </a></div><div class=sidebar-primary-item><script>document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);</script></div><div class=sidebar-primary-item><nav class="bd-links bd-docs-nav" aria-label=Main><div class="bd-toc-item navbar-nav active"><p aria-level=2 class=caption role=heading><span class=caption-text>Quick Start</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal" href=../../quick_start/easy_install.html>Installation Guide</a></li><li class=toctree-l1><a class="reference internal" href=../../quick_start/input.html>Brief Intro. to Inputs and Commands</a></li><li class="toctree-l1 has-children"><a class="reference internal" href=../../quick_start/hands_on/index.html>Quick Examples</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../../quick_start/hands_on/tutorial1_base_sk.html>Tutorial 1: deeptb-sk baseline model</a></li><li class=toctree-l2><a class="reference internal" href=../../quick_start/hands_on/tutorial2_data.html>Tutorial 2: data preparation for deeptb-sk model</a></li><li class=toctree-l2><a class="reference internal" href=../../quick_start/hands_on/tutorial3_train_si.html>Tutorial 3: Training deeptb-sk model for Silicon</a></li><li class=toctree-l2><a class="reference internal" href=../../quick_start/hands_on/tutorial4_E3_si.html>Tutorial 4: Training deeptb-e3 model for Silicon</a></li><li class=toctree-l2><a class="reference internal" href=../../quick_start/hands_on/tutorial5_TBPlaS.html>Tutorial 5: 使用 DeePTB 模型结合 TBPLaS 计算材料电学性质</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal" href=../../quick_start/api/index.html>APIs</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../../quick_start/api/basic_api.html>Basic API</a></li><li class=toctree-l2><a class="reference internal" href=../../quick_start/api/pythtb_api.html>Exporting DeePTB Models to External Tools (PythTB)</a></li><li class=toctree-l2><a class="reference internal" href=../../quick_start/api/wan90_api.html>Export DeePTB to Wannier90 files</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>INPUT TAG</span></p><ul class="nav bd-sidenav"><li class="toctree-l1 has-children"><a class="reference internal" href=../../input_params/index.html>Full Input Parameters</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../../input_params/common_options.html>Common Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/train_options.html>Train Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/model_options.html>Model Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/data_options.html>Data Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/run_options.html>Run Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/set_info.html>Set Info</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Advanced</span></p><ul class="current nav bd-sidenav"><li class="toctree-l1 has-children"><a class="reference internal" href=../sktb/index.html>DeePTB-SK Advanced</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../sktb/dftb.html>DFTB SK Files to DeePTB Model</a></li><li class=toctree-l2><a class="reference internal" href=../sktb/dptb_env.html>Environment-dependent TB</a></li><li class=toctree-l2><a class="reference internal" href=../sktb/nrl_tb.html>NRL-TB paramererization</a></li><li class=toctree-l2><a class="reference internal" href=../sktb/soc.html>Spin-orbit coupling</a></li></ul></details></li><li class="toctree-l1 current active has-children"><a class="reference internal" href=index.html>DeePTB-E3 Advanced</a><details open><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul class=current><li class=toctree-l2><a class="reference internal" href=advanced_input.html>More on Input Parameters</a></li><li class="toctree-l2 current active"><a class="current reference internal" href=#>Data Preparation</a></li><li class=toctree-l2><a class="reference internal" href=loss_analysis.html>Loss Analysis</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal" href=../elec_properties/index.html>Electronic Properties and Outputs</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../elec_properties/band.html>Band structure</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal" href=../interface/index.html>Interfaces to Other Softwares</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../interface/TBPLAS.html>TBPLAS</a></li><li class=toctree-l2><a class="reference internal" href=../interface/TBtrans.html>TBtrans</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Citing DeePTB</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal" href=../../CITATIONS.html>How to Cite</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Developing Team</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal" href=../../DevelopingTeam.html>Development Team</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Community</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal" href=../../community/contribution_guide.html>DeePTB Contribution Guide</a></li><li class=toctree-l1><a class="reference internal" href=../../CONTRIBUTING.html>Contributing to DeePTB</a></li></ul></div></nav></div></div><div class="sidebar-primary-items__end sidebar-primary__section"></div><div id=rtd-footer-container></div></div><main class=bd-main id=main-content role=main><div class=sbt-scroll-pixel-helper></div><div class=bd-content><div class=bd-article-container><div class="bd-header-article d-print-none"><div class="header-article-items header-article__inner"><div class=header-article-items__start><div class=header-article-item><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement=bottom data-bs-toggle=tooltip><span class="fa-solid fa-bars"></span></button></div></div><div class=header-article-items__end><div class=header-article-item><div class=article-header-buttons><div class="dropdown dropdown-download-buttons"><button aria-label="Download this page" class="btn dropdown-toggle" aria-expanded=false data-bs-toggle=dropdown type=button><i class="fas fa-download"></i></button><ul class=dropdown-menu><li><a class="btn btn-sm btn-download-source-button dropdown-item" title="Download source file" data-bs-placement=left data-bs-toggle=tooltip href=../../_sources/advanced/e3tb/data_preparation.md target=_blank> <span class=btn__icon-container> <i class="fas fa-file"></i> </span> <span class=btn__text-container>.md</span> </a></li><li><button class="btn btn-sm btn-download-pdf-button dropdown-item" title="Print to PDF" data-bs-placement=left data-bs-toggle=tooltip onclick=window.print()><span class=btn__icon-container> <i class="fas fa-file-pdf"></i> </span> <span class=btn__text-container>.pdf</span></button></li></ul></div><button class="btn btn-sm btn-fullscreen-button" title="Fullscreen mode" data-bs-placement=bottom data-bs-toggle=tooltip onclick=toggleFullScreen()><span class=btn__icon-container> <i class="fas fa-expand"></i> </span></button><script>document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);</script><script>document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);</script></div></div></div></div></div><div class=onlyprint id=jb-print-docs-body><h1>Data Preparation</h1><div id=print-main-content><div id=jb-print-toc></div></div></div><div id=searchbox></div><article class=bd-article><section class="tex2jax_ignore mathjax_ignore" id=data-preparation><h1>Data Preparation<a title="Link to this heading" class=headerlink href=#data-preparation>#</a></h1><p>We suggest the user use a data parsing tool <a class="reference external" href=https://github.com/floatingCatty/dftio>dftio</a> to directly convert the output data from DFT calculation into readable datasets. Our implementation supports the parsed dataset format of <code class="docutils literal notranslate"><span class=pre>dftio</span></code>. Users can just clone the <code class="docutils literal notranslate"><span class=pre>dftio</span></code> repository and run <code class="docutils literal notranslate"><span class=pre>pip</span> <span class=pre>install</span> <span class=pre>.</span></code> in its root directory. Then one can use the following parsing command for the parallel data processing directly from the DFT output:</p><div class="highlight-bash notranslate"><div class=highlight><pre><span></span>usage:<span class=w> </span>dftio<span class=w> </span>parse<span class=w> </span><span class=o>[</span>-h<span class=o>]</span><span class=w> </span><span class=o>[</span>-ll<span class=w> </span><span class=o>{</span>DEBUG,3,INFO,2,WARNING,1,ERROR,0<span class=o>}]</span><span class=w> </span><span class=o>[</span>-lp<span class=w> </span>LOG_PATH<span class=o>]</span><span class=w> </span><span class=o>[</span>-m<span class=w> </span>MODE<span class=o>]</span><span class=w> </span><span class=o>[</span>-n<span class=w> </span>NUM_WORKERS<span class=o>]</span><span class=w> </span><span class=o>[</span>-r<span class=w> </span>ROOT<span class=o>]</span><span class=w> </span><span class=o>[</span>-p<span class=w> </span>PREFIX<span class=o>]</span><span class=w> </span><span class=o>[</span>-o<span class=w> </span>OUTROOT<span class=o>]</span><span class=w> </span><span class=o>[</span>-f<span class=w> </span>FORMAT<span class=o>]</span><span class=w> </span><span class=o>[</span>-ham<span class=o>]</span><span class=w> </span><span class=o>[</span>-ovp<span class=o>]</span><span class=w> </span><span class=o>[</span>-dm<span class=o>]</span><span class=w> </span><span class=o>[</span>-eig<span class=o>]</span>

optional<span class=w> </span>arguments:
<span class=w>  </span>-h,<span class=w> </span>--help<span class=w>            </span>show<span class=w> </span>this<span class=w> </span><span class=nb>help</span><span class=w> </span>message<span class=w> </span>and<span class=w> </span><span class=nb>exit</span>
<span class=w>  </span>-ll<span class=w> </span><span class=o>{</span>DEBUG,3,INFO,2,WARNING,1,ERROR,0<span class=o>}</span>,<span class=w> </span>--log-level<span class=w> </span><span class=o>{</span>DEBUG,3,INFO,2,WARNING,1,ERROR,0<span class=o>}</span>
<span class=w>                        </span><span class=nb>set</span><span class=w> </span>verbosity<span class=w> </span>level<span class=w> </span>by<span class=w> </span>string<span class=w> </span>or<span class=w> </span>number,<span class=w> </span><span class=nv>0</span><span class=o>=</span>ERROR,<span class=w> </span><span class=nv>1</span><span class=o>=</span>WARNING,<span class=w> </span><span class=nv>2</span><span class=o>=</span>INFO<span class=w> </span>and<span class=w> </span><span class=nv>3</span><span class=o>=</span>DEBUG<span class=w> </span><span class=o>(</span>default:<span class=w> </span>INFO<span class=o>)</span>
<span class=w>  </span>-lp<span class=w> </span>LOG_PATH,<span class=w> </span>--log-path<span class=w> </span>LOG_PATH
<span class=w>                        </span><span class=nb>set</span><span class=w> </span>log<span class=w> </span>file<span class=w> </span>to<span class=w> </span>log<span class=w> </span>messages<span class=w> </span>to<span class=w> </span>disk,<span class=w> </span><span class=k>if</span><span class=w> </span>not<span class=w> </span>specified,<span class=w> </span>the<span class=w> </span>logs<span class=w> </span>will<span class=w> </span>only<span class=w> </span>be<span class=w> </span>output<span class=w> </span>to<span class=w> </span>console<span class=w> </span><span class=o>(</span>default:<span class=w> </span>None<span class=o>)</span>
<span class=w>  </span>-m<span class=w> </span>MODE,<span class=w> </span>--mode<span class=w> </span>MODE<span class=w>  </span>The<span class=w> </span>name<span class=w> </span>of<span class=w> </span>the<span class=w> </span>DFT<span class=w> </span>software.<span class=w> </span><span class=o>(</span>default:<span class=w> </span>abacus<span class=o>)</span>
<span class=w>  </span>-n<span class=w> </span>NUM_WORKERS,<span class=w> </span>--num_workers<span class=w> </span>NUM_WORKERS
<span class=w>                        </span>The<span class=w> </span>number<span class=w> </span>of<span class=w> </span>workers<span class=w> </span>used<span class=w> </span>to<span class=w> </span>parse<span class=w> </span>the<span class=w> </span>dataset.<span class=w> </span><span class=o>(</span>For<span class=w> </span>n>1,<span class=w> </span>we<span class=w> </span>use<span class=w> </span>the<span class=w> </span>multiprocessing<span class=w> </span>to<span class=w> </span>accelerate<span class=w> </span>io.<span class=o>)</span><span class=w> </span><span class=o>(</span>default:<span class=w> </span><span class=m>1</span><span class=o>)</span>
<span class=w>  </span>-r<span class=w> </span>ROOT,<span class=w> </span>--root<span class=w> </span>ROOT<span class=w>  </span>The<span class=w> </span>root<span class=w> </span>directory<span class=w> </span>of<span class=w> </span>the<span class=w> </span>DFT<span class=w> </span>files.<span class=w> </span><span class=o>(</span>default:<span class=w> </span>./<span class=o>)</span>
<span class=w>  </span>-p<span class=w> </span>PREFIX,<span class=w> </span>--prefix<span class=w> </span>PREFIX
<span class=w>                        </span>The<span class=w> </span>prefix<span class=w> </span>of<span class=w> </span>the<span class=w> </span>DFT<span class=w> </span>files<span class=w> </span>under<span class=w> </span>root.<span class=w> </span><span class=o>(</span>default:<span class=w> </span>frame<span class=o>)</span>
<span class=w>  </span>-o<span class=w> </span>OUTROOT,<span class=w> </span>--outroot<span class=w> </span>OUTROOT
<span class=w>                        </span>The<span class=w> </span>output<span class=w> </span>root<span class=w> </span>directory.<span class=w> </span><span class=o>(</span>default:<span class=w> </span>./<span class=o>)</span>
<span class=w>  </span>-f<span class=w> </span>FORMAT,<span class=w> </span>--format<span class=w> </span>FORMAT
<span class=w>                        </span>The<span class=w> </span>output<span class=w> </span>root<span class=w> </span>directory.<span class=w> </span><span class=o>(</span>default:<span class=w> </span>dat<span class=o>)</span>
<span class=w>  </span>-ham,<span class=w> </span>--hamiltonian<span class=w>   </span>Whether<span class=w> </span>to<span class=w> </span>parse<span class=w> </span>the<span class=w> </span>Hamiltonian<span class=w> </span>matrix.<span class=w> </span><span class=o>(</span>default:<span class=w> </span>False<span class=o>)</span>
<span class=w>  </span>-ovp,<span class=w> </span>--overlap<span class=w>       </span>Whether<span class=w> </span>to<span class=w> </span>parse<span class=w> </span>the<span class=w> </span>Overlap<span class=w> </span>matrix<span class=w> </span><span class=o>(</span>default:<span class=w> </span>False<span class=o>)</span>
<span class=w>  </span>-dm,<span class=w> </span>--density_matrix
<span class=w>                        </span>Whether<span class=w> </span>to<span class=w> </span>parse<span class=w> </span>the<span class=w> </span>Density<span class=w> </span>matrix<span class=w> </span><span class=o>(</span>default:<span class=w> </span>False<span class=o>)</span>
<span class=w>  </span>-eig,<span class=w> </span>--eigenvalue<span class=w>    </span>Whether<span class=w> </span>to<span class=w> </span>parse<span class=w> </span>the<span class=w> </span>kpoints<span class=w> </span>and<span class=w> </span>eigenvalues<span class=w> </span><span class=o>(</span>default:<span class=w> </span>False<span class=o>)</span>
</pre></div></div><p>After parsing, the user need to write a info.json file and put it in the dataset. For default dataset type, the <code class="docutils literal notranslate"><span class=pre>info.json</span></code> looks like:</p><div class="highlight-JSON notranslate"><div class=highlight><pre><span></span><span class=p>{</span>
<span class=w>    </span><span class=nt>"nframes"</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
<span class=w>    </span><span class=nt>"pos_type"</span><span class=p>:</span><span class=w> </span><span class=s2>"cart"</span><span class=p>,</span>
<span class=w>    </span><span class=nt>"AtomicData_options"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>"r_max"</span><span class=p>:</span><span class=w> </span><span class=mf>7.0</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"pbc"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</pre></div></div><p>Here <code class="docutils literal notranslate"><span class=pre>pos_type</span></code> can be <code class="docutils literal notranslate"><span class=pre>cart</span></code>, <code class="docutils literal notranslate"><span class=pre>dirc</span></code> or <code class="docutils literal notranslate"><span class=pre>ase</span></code>. For <code class="docutils literal notranslate"><span class=pre>dftio</span></code> output dataset, we use <code class="docutils literal notranslate"><span class=pre>cart</span></code> by default. The <code class="docutils literal notranslate"><span class=pre>r_max</span></code>, in principle, should align with the orbital cutoff in the DFT calculation. For a single element, the <code class="docutils literal notranslate"><span class=pre>r_max</span></code> should be a float number, indicating the largest bond distance included. When the system has multiple atoms, the <code class="docutils literal notranslate"><span class=pre>r_max</span></code> can also be a dict of atomic species-specific number like <code class="docutils literal notranslate"><span class=pre>{A:</span> <span class=pre>7.0,</span> <span class=pre>B:</span> <span class=pre>8.0}</span></code>. Then the largest bond <code class="docutils literal notranslate"><span class=pre>A-A</span></code> would be 7 and <code class="docutils literal notranslate"><span class=pre>A-B</span></code> be (7+8)/2=7.5, and <code class="docutils literal notranslate"><span class=pre>B-B</span></code> would be 8. <code class="docutils literal notranslate"><span class=pre>pbc</span></code> can be a bool variable, indicating the open or close of the periodic boundary conditions of the model. It can also be a list of three bool elements like <code class="docutils literal notranslate"><span class=pre>[true,</span> <span class=pre>true,</span> <span class=pre>false]</span></code>, which means we can set the periodicity of each direction independently.</p><p>For LMDB type Dataset, the info.json is much simpler, which looks like this:</p><div class="highlight-JSON notranslate"><div class=highlight><pre><span></span><span class=p>{</span>
<span class=w>    </span><span class=nt>"r_max"</span><span class=p>:</span><span class=w> </span><span class=mf>7.0</span>
<span class=p>}</span>
</pre></div></div><p>Where other information has been stored in the dataset. LMDB dataset is designed for handeling very large data that cannot be fit into the memory directly.</p><p>Then you can set the <code class="docutils literal notranslate"><span class=pre>data_options</span></code> in the input parameters to point directly to the prepared dataset, like:</p><div class="highlight-JSON notranslate"><div class=highlight><pre><span></span><span class=nt>"data_options"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>"train"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>"root"</span><span class=p>:</span><span class=w> </span><span class=s2>"./data"</span><span class=p>,</span>
<span class=w>            </span><span class=nt>"prefix"</span><span class=p>:</span><span class=w> </span><span class=s2>"Si64"</span><span class=p>,</span>
<span class=w>            </span><span class=nt>"get_Hamiltonian"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>            </span><span class=nt>"get_overlap"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
</pre></div></div><p>If you are using a python script, the dataset can be build with the same parameters using <code class="docutils literal notranslate"><span class=pre>build_datasets</span></code>:</p><div class="highlight-Python notranslate"><div class=highlight><pre><span></span><span class=kn>from</span><span class=w> </span><span class=nn>dptb.data</span><span class=w> </span><span class=kn>import</span> <span class=n>build_dataset</span>

<span class=n>dataset</span> <span class=o>=</span> <span class=n>build_dataset</span><span class=p>(</span>
    <span class=n>root</span><span class=o>=</span><span class=s2>"your dataset root"</span><span class=p>,</span>
    <span class=nb>type</span><span class=o>=</span><span class=s2>"DefaultDataset"</span><span class=p>,</span>
    <span class=n>prefix</span><span class=o>=</span><span class=s2>"frame"</span><span class=p>,</span>
    <span class=n>get_overlap</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>get_Hamiltonian</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>basis</span><span class=o>=</span><span class=p>{</span><span class=s2>"Si"</span><span class=p>:</span><span class=s2>"2s2p1d"</span><span class=p>}</span>
    <span class=p>)</span>
</pre></div></div></section></article><footer class="prev-next-footer d-print-none"><div class=prev-next-area><a title="previous page" class=left-prev href=advanced_input.html> <i class="fa-solid fa-angle-left"></i> <div class=prev-next-info><p class=prev-next-subtitle>previous</p><p class=prev-next-title>More on Input Parameters</p></div> </a><a title="next page" class=right-next href=loss_analysis.html> <div class=prev-next-info><p class=prev-next-subtitle>next</p><p class=prev-next-title>Loss Analysis</p></div> <i class="fa-solid fa-angle-right"></i> </a></div></footer></div></div><footer class=bd-footer-content><div class="bd-footer-content__inner container"><div class=footer-item><p class=component-author>By DeePTB</p></div><div class=footer-item><p class=copyright>© Copyright 2023, DeePTB. <br></p></div><div class=footer-item></div><div class=footer-item><div class=extra_footer><p><a href=https://beian.miit.gov.cn target=_blank>京ICP备20010051号-8</a></p></div></div></div></footer></main></div></div><script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script><script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script><footer class=bd-footer></footer></body></html>