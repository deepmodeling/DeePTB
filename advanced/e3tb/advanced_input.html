<!doctypehtml><html data-content_root=../../ lang=en><head><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0 name=viewport><meta content=width=device-width,initial-scale=1 name=viewport><title>More on Input Parameters — DeePTB  documentation</title><script data-cfasync=false>document.documentElement.dataset.mode=localStorage.getItem(`mode`)||``;document.documentElement.dataset.theme=localStorage.getItem(`theme`)||``</script><link href=../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b rel=stylesheet><link href=../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b rel=stylesheet><link href=../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b rel=stylesheet><link href=../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b rel=stylesheet><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2 rel=preload type=font/woff2><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2 rel=preload type=font/woff2><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2 rel=preload type=font/woff2><link href=../../_static/pygments.css?v=8f2a1f02 rel=stylesheet><link href=../../_static/styles/sphinx-book-theme.css?v=eba8b062 rel=stylesheet><link href=../../_static/banner.css?v=f1520836 rel=stylesheet><link as=script href=../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b rel=preload><link as=script href=../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b rel=preload><script src=../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b></script><script src=../../_static/documentation_options.js?v=9eb32ce0></script><script src=../../_static/doctools.js?v=9bcbadda></script><script src=../../_static/sphinx_highlight.js?v=dc90522c></script><script src=../../_static/scripts/sphinx-book-theme.js?v=887ef09a></script><script src=../../_static/banner.js?v=a6a668d4></script><script>DOCUMENTATION_OPTIONS.pagename=`advanced/e3tb/advanced_input`</script><link href=../../genindex.html rel=index title=Index><link href=../../search.html rel=search title=Search><link title="Data Preparation"href=data_preparation.html rel=next><link title="DeePTB-E3 Advanced"href=index.html rel=prev><meta content=width=device-width,initial-scale=1 name=viewport><meta content=en name=docsearch:language><link href=https://unpkg.com/ rel=preconnect><link href=https://unpkg.com/@njzjz/icons@0.0.5/logos/deepmodeling.svg rel=icon type=image/png><div class="container-fluid header-holder tutorials-header"id=header-holder><div class=container><div class=header-container><a aria-label=deepmodeling class=header-logo href=https://deepmodeling.com></a><div class=main-menu><ul><li><a href=https://deepmodeling.com>Home</a></li><li><a href=https://blogs.deepmodeling.com>Blog</a></li><li><a href=https://tutorials.deepmodeling.com>Tutorials</a></li><li class="active docs-active"><div class=resources-dropdown data-toggle=resources-dropdown id=resourcesDropdownButton><a class="resource-option with-down-orange-arrow"href=https://docs.deepmodeling.com/> Docs </a><div class=resources-dropdown-menu><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/deepmd/> <span class=dropdown-title>DeePMD-kit</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/dpgen/> <span class=dropdown-title>DP-GEN</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/dpdata/> <span class=dropdown-title>dpdata</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/dpdispatcher/> <span class=dropdown-title>DPDispatcher</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://abacus.deepmodeling.com/> <span class=dropdown-title>ABACUS</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://deepflame.deepmodeling.com/> <span class=dropdown-title>DeepFlame</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item"href=https://docs.deepmodeling.com/projects/dpti/> <span class=dropdown-title>DPTI</span> <p></p> </a></div></div></li><li><a href=https://blogs.deepmodeling.com/papers/>Publications</a></li><li><a href=https://github.com/deepmodeling>GitHub</a></li></ul></div><a class=main-menu-open-button data-behavior=open-mobile-menu href=#></a></div></div></div><div class=mobile-main-menu><div class=container-fluid><div class=container><div class=mobile-main-menu-header-container><a aria-label=deepmodeling class=header-logo href=https://deepmodeling.com></a><a class=main-menu-close-button data-behavior=close-mobile-menu href=#></a></div></div></div><div class=mobile-main-menu-links-container><div class=main-menu><ul><li><a href=https://deepmodeling.com>Home</a></li><li><a href=https://blogs.deepmodeling.com>Blog</a></li><li><a href=https://tutorials.deepmodeling.com>Tutorials</a></li><li><a href=https://docs.deepmodeling.com/>Docs</a></li><li><a href=https://blogs.deepmodeling.com/papers/>Publications</a></li><li><a href=https://github.com/deepmodeling>GitHub</a></li></ul></div></div></div></head><body data-bs-root-margin="0px 0px -60%"data-bs-spy=scroll data-bs-target=.bd-toc-nav data-default-mode data-offset=180><div class="skip-link d-print-none"id=pst-skip-link><a href=#main-content>Skip to main content</a></div><div id=pst-scroll-pixel-helper></div><button class="btn rounded-pill"id=pst-back-to-top type=button><i class="fa-solid fa-arrow-up"></i>Back to top</button><input class=sidebar-toggle id=pst-primary-sidebar-checkbox type=checkbox><label class="overlay overlay-primary"for=pst-primary-sidebar-checkbox></label><input class=sidebar-toggle id=pst-secondary-sidebar-checkbox type=checkbox><label class="overlay overlay-secondary"for=pst-secondary-sidebar-checkbox></label><div class=search-button__wrapper><div class=search-button__overlay></div><div class=search-button__search-container><form class="bd-search d-flex align-items-center"action=../../search.html><i class="fa-solid fa-magnifying-glass"></i><input aria-label=Search... autocapitalize=off autocomplete=off autocorrect=off class=form-control id=search-input name=q placeholder=Search... spellcheck=false type=search><span class=search-button__kbd-shortcut><kbd class=kbd-shortcut__modifier>Ctrl</kbd>+<kbd>K</kbd></span></form></div></div><div class="pst-async-banner-revealer d-none"><aside aria-label="Version warning"class="d-none d-print-none"id=bd-header-version-warning></aside></div><header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none"></header><div class=bd-container><div class="bd-container__inner bd-page-width"><div class="bd-sidebar-primary bd-sidebar"><div class="sidebar-header-items sidebar-primary__section"></div><div class="sidebar-primary-items__start sidebar-primary__section"><div class=sidebar-primary-item><a class="navbar-brand logo"href=../../index.html> <img alt="DeePTB  documentation - Home"class="logo__image only-light"src=../../_static/deeptb-logo.svg> <script>document.write(`<img src="../../_static/deeptb-logo.svg" class="logo__image only-dark" alt="DeePTB  documentation - Home"/>`)</script> </a></div><div class=sidebar-primary-item><script>document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `)</script></div><div class=sidebar-primary-item><nav class="bd-links bd-docs-nav"aria-label=Main><div class="bd-toc-item navbar-nav active"><p aria-level=2 class=caption role=heading><span class=caption-text>Quick Start</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal"href=../../quick_start/easy_install.html>Installation Guide</a></li><li class=toctree-l1><a class="reference internal"href=../../quick_start/input.html>Brief Intro. to Inputs and Commands</a></li><li class="toctree-l1 has-children"><a class="reference internal"href=../../quick_start/hands_on/index.html>A quick Example</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../../quick_start/hands_on/sktb_hands_on.html>DeePTB-SK: h-BN</a></li><li class=toctree-l2><a class="reference internal"href=../../quick_start/hands_on/e3tb_hands_on.html>DeePTB-E3: Bulk Silicon</a></li></ul></details></li><li class=toctree-l1><a class="reference internal"href=../../quick_start/basic_api.html>Basic API</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>INPUT TAG</span></p><ul class="nav bd-sidenav"><li class="toctree-l1 has-children"><a class="reference internal"href=../../input_params/index.html>Full Input Parameters</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../../input_params/common_options.html>Common Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/train_options.html>Train Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/model_options.html>Model Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/data_options.html>Data Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/run_options.html>Run Options</a></li><li class=toctree-l2><a class="reference internal"href=../../input_params/set_info.html>Set Info</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Advanced</span></p><ul class="current nav bd-sidenav"><li class="toctree-l1 has-children"><a class="reference internal"href=../sktb/index.html>DeePTB-SK Advanced</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../sktb/dftb.html>DFTB SK Files to DeePTB Model</a></li><li class=toctree-l2><a class="reference internal"href=../sktb/dptb_env.html>Environment-dependent TB</a></li><li class=toctree-l2><a class="reference internal"href=../sktb/nrl_tb.html>NRL-TB paramererization</a></li><li class=toctree-l2><a class="reference internal"href=../sktb/soc.html>Spin-orbit coupling</a></li></ul></details></li><li class="toctree-l1 current active has-children"><a class="reference internal"href=index.html>DeePTB-E3 Advanced</a><details open><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul class=current><li class="toctree-l2 current active"><a class="current reference internal"href=#>More on Input Parameters</a></li><li class=toctree-l2><a class="reference internal"href=data_preparation.html>Data Preparation</a></li><li class=toctree-l2><a class="reference internal"href=loss_analysis.html>Loss Analysis</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal"href=../elec_properties/index.html>Electronic Properties and Outputs</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../elec_properties/band.html>Band structure</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal"href=../interface/index.html>Interfaces to Other Softwares</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal"href=../interface/TBPLAS.html>TBPLAS</a></li><li class=toctree-l2><a class="reference internal"href=../interface/TBtrans.html>TBtrans</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Citing DeePTB</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal"href=../../CITATIONS.html>How to Cite</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Developing Team</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal"href=../../DevelopingTeam.html>Development Team</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Community</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal"href=../../community/contribution_guide.html>DeePTB Contribution Guide</a></li><li class=toctree-l1><a class="reference internal"href=../../CONTRIBUTING.html>Contributing to DeePTB</a></li></ul></div></nav></div></div><div class="sidebar-primary-items__end sidebar-primary__section"></div><div id=rtd-footer-container></div></div><main class=bd-main id=main-content role=main><div class=sbt-scroll-pixel-helper></div><div class=bd-content><div class=bd-article-container><div class="bd-header-article d-print-none"><div class="header-article-items header-article__inner"><div class=header-article-items__start><div class=header-article-item><button class="sidebar-toggle primary-toggle btn btn-sm"title="Toggle primary sidebar"data-bs-placement=bottom data-bs-toggle=tooltip><span class="fa-solid fa-bars"></span></button></div></div><div class=header-article-items__end><div class=header-article-item><div class=article-header-buttons><div class="dropdown dropdown-download-buttons"><button aria-label="Download this page"class="btn dropdown-toggle"aria-expanded=false data-bs-toggle=dropdown type=button><i class="fas fa-download"></i></button><ul class=dropdown-menu><li><a class="btn btn-sm btn-download-source-button dropdown-item"title="Download source file"data-bs-placement=left data-bs-toggle=tooltip href=../../_sources/advanced/e3tb/advanced_input.md target=_blank> <span class=btn__icon-container> <i class="fas fa-file"></i> </span> <span class=btn__text-container>.md</span> </a></li><li><button class="btn btn-sm btn-download-pdf-button dropdown-item"title="Print to PDF"data-bs-placement=left data-bs-toggle=tooltip onclick=window.print()><span class=btn__icon-container> <i class="fas fa-file-pdf"></i> </span> <span class=btn__text-container>.pdf</span></button></li></ul></div><button class="btn btn-sm btn-fullscreen-button"title="Fullscreen mode"data-bs-placement=bottom data-bs-toggle=tooltip onclick=toggleFullScreen()><span class=btn__icon-container> <i class="fas fa-expand"></i> </span></button><script>document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`)</script><script>document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`)</script></div></div></div></div></div><div class=onlyprint id=jb-print-docs-body><h1>More on Input Parameters</h1><div id=print-main-content><div id=jb-print-toc></div></div></div><div id=searchbox></div><article class=bd-article><section class="tex2jax_ignore mathjax_ignore"id=more-on-input-parameters><h1>More on Input Parameters<a title="Link to this heading"class=headerlink href=#more-on-input-parameters>#</a></h1><p>In <code class="docutils literal notranslate"><span class=pre>common_options</span></code>, the user should define the some global param like:</p><div class="highlight-JSON notranslate"><div class=highlight><pre><span></span><span class=nt>"common_options"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>"basis"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nt>"C"</span><span class=p>:</span><span class=w> </span><span class=s2>"2s2p1d"</span><span class=p>,</span>
<span class=w>                </span><span class=nt>"N"</span><span class=p>:</span><span class=w> </span><span class=s2>"2s2p1d"</span>
<span class=w>            </span><span class=p>},</span>
<span class=w>            </span><span class=nt>"device"</span><span class=p>:</span><span class=w> </span><span class=s2>"cuda"</span><span class=p>,</span>
<span class=w>            </span><span class=nt>"dtype"</span><span class=p>:</span><span class=w> </span><span class=s2>"float32"</span><span class=p>,</span>
<span class=w>            </span><span class=nt>"overlap"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>            </span><span class=nt>"seed"</span><span class=p>:</span><span class=w> </span><span class=mi>42</span>
<span class=w>    </span><span class=p>}</span>
</pre></div></div><ul class=simple><li><p><code class="docutils literal notranslate"><span class=pre>basis</span></code> should align with the basis used to perform LCAO DFT calculations. The <code class="docutils literal notranslate"><span class=pre>"2s2p1d"</span></code> here indicates 2x<code class="docutils literal notranslate"><span class=pre>s</span></code> orbital, 2x<code class="docutils literal notranslate"><span class=pre>p</span></code>orbital and one <code class="docutils literal notranslate"><span class=pre>d</span></code> orbital. The</p></li><li><p><code class="docutils literal notranslate"><span class=pre>seed</span></code> controls the global random seed of all related packages. <code class="docutils literal notranslate"><span class=pre>dtype</span></code> can be chosen between <code class="docutils literal notranslate"><span class=pre>float32</span></code> and <code class="docutils literal notranslate"><span class=pre>float64</span></code>, but the former is accurate enough in most cases. If you have multiple cards, the</p></li><li><p><code class="docutils literal notranslate"><span class=pre>device</span></code> can be setted as <code class="docutils literal notranslate"><span class=pre>cuda:0</span></code>, <code class="docutils literal notranslate"><span class=pre>cuda:1</span></code> and so on, where the number is the device id.</p></li><li><p><code class="docutils literal notranslate"><span class=pre>overlap</span></code> controls the fitting of the overlap matrix. The user should provide overlap in the dataset when configuring the data_options if <code class="docutils literal notranslate"><span class=pre>overlap</span></code> is setted as True.</p></li></ul><p>In <code class="docutils literal notranslate"><span class=pre>train_options</span></code>, a common parameter looks like this:</p><div class="highlight-JSON notranslate"><div class=highlight><pre><span></span><span class=nt>"train_options"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nt>"num_epoch"</span><span class=p>:</span><span class=w> </span><span class=mi>500</span><span class=p>,</span>
<span class=w>    </span><span class=nt>"batch_size"</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
<span class=w>    </span><span class=nt>"optimizer"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>"lr"</span><span class=p>:</span><span class=w> </span><span class=mf>0.05</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"Adam"</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>"lr_scheduler"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"rop"</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"factor"</span><span class=p>:</span><span class=w> </span><span class=mf>0.8</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"patience"</span><span class=p>:</span><span class=w> </span><span class=mi>6</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"min_lr"</span><span class=p>:</span><span class=w> </span><span class=mf>1e-6</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>"loss_options"</span><span class=p>:{</span>
<span class=w>        </span><span class=nt>"train"</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>"method"</span><span class=p>:</span><span class=w> </span><span class=s2>"hamil_abs"</span><span class=p>,</span><span class=w> </span><span class=nt>"onsite_shift"</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>},</span>
<span class=w>        </span><span class=nt>"validation"</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>"method"</span><span class=p>:</span><span class=w> </span><span class=s2>"hamil_abs"</span><span class=p>,</span><span class=w> </span><span class=nt>"onsite_shift"</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>}</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>"save_freq"</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=p>,</span>
<span class=w>    </span><span class=nt>"validation_freq"</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=p>,</span>
<span class=w>    </span><span class=nt>"display_freq"</span><span class=p>:</span><span class=w> </span><span class=mi>10</span>
<span class=p>}</span>
</pre></div></div><p>For <code class="docutils literal notranslate"><span class=pre>lr_scheduler</span></code>, please ensure the <code class="docutils literal notranslate"><span class=pre>patience</span></code> x <code class="docutils literal notranslate"><span class=pre>num_samples</span></code> / <code class="docutils literal notranslate"><span class=pre>batch_size</span></code> ranged between 2000 to 6000.</p><p>When the dataset contains multiple elements, and you are fitting the Hamiltonian, it is suggested to open a tag in loss_options for better performance. Most DFT software would allow for a uniform shift when computing the electrostatic potentials, therefore, bringing an extra degree of freedom. The <code class="docutils literal notranslate"><span class=pre>onsite_shift</span></code> tag allows such freedom and makes the model generalizable to all sorts of element combinations:</p><div class="highlight-JSON notranslate"><div class=highlight><pre><span></span><span class=nt>"loss_options"</span><span class=p>:{</span>
<span class=w>        </span><span class=nt>"train"</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>"method"</span><span class=p>:</span><span class=w> </span><span class=s2>"hamil_abs"</span><span class=p>,</span><span class=w> </span><span class=nt>"onsite_shift"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>},</span>
<span class=w>        </span><span class=nt>"validation"</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>"method"</span><span class=p>:</span><span class=w> </span><span class=s2>"hamil_abs"</span><span class=p>,</span><span class=w> </span><span class=nt>"onsite_shift"</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
</pre></div></div><p>In <code class="docutils literal notranslate"><span class=pre>model_options</span></code>, we support two types of e3 group equivariant embedding methods: Strictly Localized Equivariant Message-passing or <code class="docutils literal notranslate"><span class=pre>slem</span></code>, and Localized Equivariant Message-passing or <code class="docutils literal notranslate"><span class=pre>lem</span></code>. The former ensures strict localization by truncating the propagation of distant neighbours’ information and, therefore is suitable for bulk systems where the electron localization is enhanced by the scattering effect. <code class="docutils literal notranslate"><span class=pre>Lem</span></code> method, on the other hand, contained such localization design inherently by incorporating learnable decaying functions describing the dependency across distance.</p><p>The model options for slem and lem are the same, here is an short example:</p><div class="highlight-JSON notranslate"><div class=highlight><pre><span></span><span class=nt>"model_options"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nt>"embedding"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>"method"</span><span class=p>:</span><span class=w> </span><span class=s2>"slem"</span><span class=p>,</span><span class=w> </span><span class=err>#</span><span class=w> </span><span class=err>or</span><span class=w> </span><span class=err>lem</span>
<span class=w>        </span><span class=nt>"r_max"</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>"Mo"</span><span class=p>:</span><span class=mf>7.0</span><span class=p>,</span><span class=w> </span><span class=nt>"S"</span><span class=p>:</span><span class=mf>7.0</span><span class=p>,</span><span class=w> </span><span class=nt>"W"</span><span class=p>:</span><span class=w> </span><span class=mf>8.0</span><span class=p>},</span>
<span class=w>        </span><span class=nt>"irreps_hidden"</span><span class=p>:</span><span class=w> </span><span class=s2>"64x0e+32x1o+32x2e+32x3o+32x4e+16x5o+8x6e+4x7o+4x8e"</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"n_layers"</span><span class=p>:</span><span class=w> </span><span class=mi>4</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"env_embed_multiplicity"</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"avg_num_neighbors"</span><span class=p>:</span><span class=w> </span><span class=mi>51</span><span class=p>,</span>
<span class=w>        </span><span class=nt>"latent_dim"</span><span class=p>:</span><span class=w> </span><span class=mi>64</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>"prediction"</span><span class=p>:{</span>
<span class=w>        </span><span class=nt>"method"</span><span class=p>:</span><span class=w> </span><span class=s2>"e3tb"</span><span class=p>,</span><span class=w> </span><span class=err>#</span><span class=w> </span><span class=kc>nee</span><span class=err>d</span><span class=w> </span><span class=kc>t</span><span class=err>o</span><span class=w> </span><span class=err>be</span><span class=w> </span><span class=err>se</span><span class=kc>t</span><span class=w> </span><span class=err>as</span><span class=w> </span><span class=err>e</span><span class=mi>3</span><span class=kc>t</span><span class=err>b</span><span class=w> </span><span class=err>here</span>
<span class=w>        </span><span class=nt>"neurons"</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=mi>32</span><span class=p>,</span><span class=w> </span><span class=mi>32</span><span class=p>]</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</pre></div></div><p>Here, <code class="docutils literal notranslate"><span class=pre>method</span></code> indicates the e3 descripor employed.</p><p><code class="docutils literal notranslate"><span class=pre>r_max</span></code> can be a float or int number, or a dict with atom species-specific float/int number, which indicates their cutoff envelope function, used to decay the distant atom’s effect smoothly. We highly suggest the user go to the DFT calculation files and check the orbital’s radial cutoff information to figure out how large this value should be.</p><p><code class="docutils literal notranslate"><span class=pre>irreps_hidden</span></code>: Very important! This parameter decides mostly the representation capacity of the model, along with the model size and consumption of GPU memory. This parameter indicates the irreps of hidden equivariant space, the definition here follows that for example, <code class="docutils literal notranslate"><span class=pre>64x0e</span></code> states <code class="docutils literal notranslate"><span class=pre>64</span></code> irreducible representation with <code class="docutils literal notranslate"><span class=pre>l=0</span></code> and <code class="docutils literal notranslate"><span class=pre>even</span></code> parity. For each basis set, we provide a tool to generate the least essential <code class="docutils literal notranslate"><span class=pre>irreps_hidden</span></code>, we also highly suggest the user add at least 3 times the number of essential irreps to enhance representation capacity.</p><div class="highlight-IPYTHON notranslate"><div class=highlight><pre><span></span>In [5]: from dptb.data import OrbitalMapper

In [6]: idp = OrbitalMapper(basis={"Si": "2s2p1d"})

In [7]: idp.get_irreps_ess()
Out[7]: 7x0e+6x1o+6x2e+2x3o+1x4e
</pre></div></div><p>Rules for the irreps setting: First, we should check the largest angular momentum defined in the DFT LCAO basis, and then double it as our highest order of irreps (since the addition rule of the angular momentum). For example, for <code class="docutils literal notranslate"><span class=pre>1s1p</span></code> basis, the irreps should contain features with angular momentum from 0 to 2, which is 2 times 1, the angular momentum of <code class="docutils literal notranslate"><span class=pre>p</span></code> orbital. If the basis contains <code class="docutils literal notranslate"><span class=pre>d</span></code> orbital, then the irreps should contain angular momentum up to 4. <code class="docutils literal notranslate"><span class=pre>f</span></code> and <code class="docutils literal notranslate"><span class=pre>g</span></code> or even higher orbitals are also supported.</p><p><code class="docutils literal notranslate"><span class=pre>n_layers</span></code>: indicates the number of layers of the networks.</p><p><code class="docutils literal notranslate"><span class=pre>env_embed_multiplicity</span></code>: decide the irreps number when initializing the edge and node features.</p><p><code class="docutils literal notranslate"><span class=pre>avg_num_neighbors</span></code>: the averaged number of neighbours in the system given the cutoff radius set as <code class="docutils literal notranslate"><span class=pre>r_max</span></code>. It is recommended to do statistics of the system you are modelling, but just picking up a number ranging from 50 to 100 is also okay.</p><p><code class="docutils literal notranslate"><span class=pre>latent_dim</span></code>: The scalar channel’s dimension of the system. 32/64/128 is good enough.</p><p>For params in prediction, there is not much to be changed. The setting is pretty good.</p></section></article><footer class="prev-next-footer d-print-none"><div class=prev-next-area><a title="previous page"class=left-prev href=index.html> <i class="fa-solid fa-angle-left"></i> <div class=prev-next-info><p class=prev-next-subtitle>previous</p><p class=prev-next-title>DeePTB-E3 Advanced</p></div> </a><a title="next page"class=right-next href=data_preparation.html> <div class=prev-next-info><p class=prev-next-subtitle>next</p><p class=prev-next-title>Data Preparation</p></div> <i class="fa-solid fa-angle-right"></i> </a></div></footer></div></div><footer class=bd-footer-content><div class="bd-footer-content__inner container"><div class=footer-item><p class=component-author>By DeePTB</p></div><div class=footer-item><p class=copyright>© Copyright 2023, DeePTB. <br></p></div><div class=footer-item></div><div class=footer-item><div class=extra_footer><p><a href=https://beian.miit.gov.cn target=_blank>京ICP备20010051号-8</a></p></div></div></div></footer></main></div></div><script src=../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b></script><script src=../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b></script><footer class=bd-footer></footer></body></html>