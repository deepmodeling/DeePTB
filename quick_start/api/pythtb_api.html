<!doctype html><html data-content_root=../../ lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="width=device-width,initial-scale=1" name=viewport><title>Exporting DeePTB Models to External Tools (PythTB) — DeePTB  documentation</title><script data-cfasync=false>document.documentElement.dataset.mode=localStorage.getItem(`mode`)||``,document.documentElement.dataset.theme=localStorage.getItem(`theme`)||``;</script><link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel=stylesheet><link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel=stylesheet><link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel=stylesheet><link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel=stylesheet><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2 rel=preload type=font/woff2><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2 rel=preload type=font/woff2><link as=font crossorigin href=../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2 rel=preload type=font/woff2><link href="../../_static/pygments.css?v=8f2a1f02" rel=stylesheet><link href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" rel=stylesheet><link href=../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css rel=stylesheet><link href="../../_static/banner.css?v=f1520836" rel=stylesheet><link href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" as=script rel=preload><link href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" as=script rel=preload><script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script><script src="../../_static/documentation_options.js?v=9eb32ce0"></script><script src="../../_static/doctools.js?v=9bcbadda"></script><script src="../../_static/sphinx_highlight.js?v=dc90522c"></script><script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script><script src="../../_static/banner.js?v=a6a668d4"></script><script>DOCUMENTATION_OPTIONS.pagename=`quick_start/api/pythtb_api`;</script><link href=../../genindex.html rel=index title=Index><link href=../../search.html rel=search title=Search><link title="Export DeePTB to Wannier90 files" href=wan90_api.html rel=next><link title="Basic API" href=basic_api.html rel=prev><meta content="width=device-width,initial-scale=1" name=viewport><meta content=en name=docsearch:language><link href=https://unpkg.com/ rel=preconnect><link href=https://unpkg.com/@njzjz/icons@0.0.5/logos/deepmodeling.svg rel=icon type=image/png><div class="container-fluid header-holder tutorials-header" id=header-holder><div class=container><div class=header-container><a aria-label=deepmodeling class=header-logo href=https://deepmodeling.com></a><div class=main-menu><ul><li><a href=https://deepmodeling.com>Home</a></li><li><a href=https://blogs.deepmodeling.com>Blog</a></li><li><a href=https://tutorials.deepmodeling.com>Tutorials</a></li><li class="active docs-active"><div class=resources-dropdown data-toggle=resources-dropdown id=resourcesDropdownButton><a class="resource-option with-down-orange-arrow" href=https://docs.deepmodeling.com/> Docs </a><div class=resources-dropdown-menu><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/deepmd/> <span class=dropdown-title>DeePMD-kit</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/dpgen/> <span class=dropdown-title>DP-GEN</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/dpdata/> <span class=dropdown-title>dpdata</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/dpdispatcher/> <span class=dropdown-title>DPDispatcher</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://abacus.deepmodeling.com/> <span class=dropdown-title>ABACUS</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://deepflame.deepmodeling.com/> <span class=dropdown-title>DeepFlame</span> <p></p> </a><a class="doc-dropdown-option nav-dropdown-item" href=https://docs.deepmodeling.com/projects/dpti/> <span class=dropdown-title>DPTI</span> <p></p> </a></div></div></li><li><a href=https://blogs.deepmodeling.com/papers/>Publications</a></li><li><a href=https://github.com/deepmodeling>GitHub</a></li></ul></div><a class=main-menu-open-button data-behavior=open-mobile-menu href=#></a></div></div></div><div class=mobile-main-menu><div class=container-fluid><div class=container><div class=mobile-main-menu-header-container><a aria-label=deepmodeling class=header-logo href=https://deepmodeling.com></a><a class=main-menu-close-button data-behavior=close-mobile-menu href=#></a></div></div></div><div class=mobile-main-menu-links-container><div class=main-menu><ul><li><a href=https://deepmodeling.com>Home</a></li><li><a href=https://blogs.deepmodeling.com>Blog</a></li><li><a href=https://tutorials.deepmodeling.com>Tutorials</a></li><li><a href=https://docs.deepmodeling.com/>Docs</a></li><li><a href=https://blogs.deepmodeling.com/papers/>Publications</a></li><li><a href=https://github.com/deepmodeling>GitHub</a></li></ul></div></div></div></head><body data-bs-root-margin="0px 0px -60%" data-bs-spy=scroll data-bs-target=.bd-toc-nav data-default-mode data-offset=180><div class="skip-link d-print-none" id=pst-skip-link><a href=#main-content>Skip to main content</a></div><div id=pst-scroll-pixel-helper></div><button class="btn rounded-pill" id=pst-back-to-top type=button><i class="fa-solid fa-arrow-up"></i>Back to top</button><input class=sidebar-toggle id=pst-primary-sidebar-checkbox type=checkbox><label class="overlay overlay-primary" for=pst-primary-sidebar-checkbox></label><input class=sidebar-toggle id=pst-secondary-sidebar-checkbox type=checkbox><label class="overlay overlay-secondary" for=pst-secondary-sidebar-checkbox></label><div class=search-button__wrapper><div class=search-button__overlay></div><div class=search-button__search-container><form class="bd-search d-flex align-items-center" action=../../search.html><i class="fa-solid fa-magnifying-glass"></i><input aria-label=Search... autocapitalize=off autocomplete=off autocorrect=off class=form-control id=search-input name=q placeholder=Search... spellcheck=false type=search><span class=search-button__kbd-shortcut><kbd class=kbd-shortcut__modifier>Ctrl</kbd>+<kbd>K</kbd></span></form></div></div><div class="pst-async-banner-revealer d-none"><aside aria-label="Version warning" class="d-none d-print-none" id=bd-header-version-warning></aside></div><header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none"></header><div class=bd-container><div class="bd-container__inner bd-page-width"><div class="bd-sidebar-primary bd-sidebar"><div class="sidebar-header-items sidebar-primary__section"></div><div class="sidebar-primary-items__start sidebar-primary__section"><div class=sidebar-primary-item><a class="navbar-brand logo" href=../../index.html> <img alt="DeePTB  documentation - Home" class="logo__image only-light" src=../../_static/deeptb-logo.png> <script>document.write(`<img src="../../_static/deeptb-logo.png" class="logo__image only-dark" alt="DeePTB  documentation - Home"/>`);</script> </a></div><div class=sidebar-primary-item><script>document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);</script></div><div class=sidebar-primary-item><nav class="bd-links bd-docs-nav" aria-label=Main><div class="bd-toc-item navbar-nav active"><p aria-level=2 class=caption role=heading><span class=caption-text>Quick Start</span></p><ul class="current nav bd-sidenav"><li class=toctree-l1><a class="reference internal" href=../easy_install.html>Installation Guide</a></li><li class=toctree-l1><a class="reference internal" href=../input.html>Brief Intro. to Inputs and Commands</a></li><li class="toctree-l1 has-children"><a class="reference internal" href=../hands_on/index.html>A quick Example</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../hands_on/tutorial1_base_sk.html>Tutorial 1: deeptb-sk baseline model</a></li><li class=toctree-l2><a class="reference internal" href=../hands_on/tutorial2_data.html>Tutorial 2: data preparation for deeptb-sk model</a></li><li class=toctree-l2><a class="reference internal" href=../hands_on/tutorial3_train_si.html>Tutorial 3: Training deeptb-sk model for Silicon</a></li><li class=toctree-l2><a class="reference internal" href=../hands_on/tutorial4_E3_si.html>Tutorial 4: Training deeptb-e3 model for Silicon</a></li><li class=toctree-l2><a class="reference internal" href=../hands_on/tutorial5_TBPlaS.html>Tutorial 5: 使用 DeePTB 模型结合 TBPLaS 计算材料电学性质</a></li></ul></details></li><li class="toctree-l1 current active has-children"><a class="reference internal" href=index.html>A quick Example</a><details open><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul class=current><li class=toctree-l2><a class="reference internal" href=basic_api.html>Basic API</a></li><li class="toctree-l2 current active"><a class="current reference internal" href=#>Exporting DeePTB Models to External Tools (PythTB)</a></li><li class=toctree-l2><a class="reference internal" href=wan90_api.html>Export DeePTB to Wannier90 files</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>INPUT TAG</span></p><ul class="nav bd-sidenav"><li class="toctree-l1 has-children"><a class="reference internal" href=../../input_params/index.html>Full Input Parameters</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../../input_params/common_options.html>Common Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/train_options.html>Train Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/model_options.html>Model Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/data_options.html>Data Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/run_options.html>Run Options</a></li><li class=toctree-l2><a class="reference internal" href=../../input_params/set_info.html>Set Info</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Advanced</span></p><ul class="nav bd-sidenav"><li class="toctree-l1 has-children"><a class="reference internal" href=../../advanced/sktb/index.html>DeePTB-SK Advanced</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../../advanced/sktb/dftb.html>DFTB SK Files to DeePTB Model</a></li><li class=toctree-l2><a class="reference internal" href=../../advanced/sktb/dptb_env.html>Environment-dependent TB</a></li><li class=toctree-l2><a class="reference internal" href=../../advanced/sktb/nrl_tb.html>NRL-TB paramererization</a></li><li class=toctree-l2><a class="reference internal" href=../../advanced/sktb/soc.html>Spin-orbit coupling</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal" href=../../advanced/e3tb/index.html>DeePTB-E3 Advanced</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../../advanced/e3tb/advanced_input.html>More on Input Parameters</a></li><li class=toctree-l2><a class="reference internal" href=../../advanced/e3tb/data_preparation.html>Data Preparation</a></li><li class=toctree-l2><a class="reference internal" href=../../advanced/e3tb/loss_analysis.html>Loss Analysis</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal" href=../../advanced/elec_properties/index.html>Electronic Properties and Outputs</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../../advanced/elec_properties/band.html>Band structure</a></li></ul></details></li><li class="toctree-l1 has-children"><a class="reference internal" href=../../advanced/interface/index.html>Interfaces to Other Softwares</a><details><summary><span class=toctree-toggle role=presentation><i class="fa-solid fa-chevron-down"></i></span></summary><ul><li class=toctree-l2><a class="reference internal" href=../../advanced/interface/TBPLAS.html>TBPLAS</a></li><li class=toctree-l2><a class="reference internal" href=../../advanced/interface/TBtrans.html>TBtrans</a></li></ul></details></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Citing DeePTB</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal" href=../../CITATIONS.html>How to Cite</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Developing Team</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal" href=../../DevelopingTeam.html>Development Team</a></li></ul><p aria-level=2 class=caption role=heading><span class=caption-text>Community</span></p><ul class="nav bd-sidenav"><li class=toctree-l1><a class="reference internal" href=../../community/contribution_guide.html>DeePTB Contribution Guide</a></li><li class=toctree-l1><a class="reference internal" href=../../CONTRIBUTING.html>Contributing to DeePTB</a></li></ul></div></nav></div></div><div class="sidebar-primary-items__end sidebar-primary__section"></div><div id=rtd-footer-container></div></div><main class=bd-main id=main-content role=main><div class=sbt-scroll-pixel-helper></div><div class=bd-content><div class=bd-article-container><div class="bd-header-article d-print-none"><div class="header-article-items header-article__inner"><div class=header-article-items__start><div class=header-article-item><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement=bottom data-bs-toggle=tooltip><span class="fa-solid fa-bars"></span></button></div></div><div class=header-article-items__end><div class=header-article-item><div class=article-header-buttons><div class="dropdown dropdown-download-buttons"><button aria-label="Download this page" class="btn dropdown-toggle" aria-expanded=false data-bs-toggle=dropdown type=button><i class="fas fa-download"></i></button><ul class=dropdown-menu><li><a class="btn btn-sm btn-download-source-button dropdown-item" title="Download source file" data-bs-placement=left data-bs-toggle=tooltip href=../../_sources/quick_start/api/pythtb_api.ipynb target=_blank> <span class=btn__icon-container> <i class="fas fa-file"></i> </span> <span class=btn__text-container>.ipynb</span> </a></li><li><button class="btn btn-sm btn-download-pdf-button dropdown-item" title="Print to PDF" data-bs-placement=left data-bs-toggle=tooltip onclick=window.print()><span class=btn__icon-container> <i class="fas fa-file-pdf"></i> </span> <span class=btn__text-container>.pdf</span></button></li></ul></div><button class="btn btn-sm btn-fullscreen-button" title="Fullscreen mode" data-bs-placement=bottom data-bs-toggle=tooltip onclick=toggleFullScreen()><span class=btn__icon-container> <i class="fas fa-expand"></i> </span></button><script>document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);</script><script>document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);</script><button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement=bottom data-bs-toggle=tooltip><span class="fa-solid fa-list"></span></button></div></div></div></div></div><div class=onlyprint id=jb-print-docs-body><h1>Exporting DeePTB Models to External Tools (PythTB)</h1><div id=print-main-content><div id=jb-print-toc><div><h2>Contents</h2></div><nav aria-label=Page><ul class="visible nav section-nav flex-column"><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#prerequisites>Prerequisites</a></li><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#load-pre-trained-model>1. Load Pre-trained Model</a></li><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#deeptb-native-band-structure>2. DeePTB Native Band Structure</a></li><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#export-to-pythtb-and-verification>3. Export to PythTB and Verification</a><ul class="nav section-nav flex-column"><li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href=#calculate-and-plot-pythtb-bands>Calculate and Plot PythTB Bands</a></li></ul></li><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#pythtb-deeptb-k>PythTB计算能带，使用DeePTB内置的 k点</a></li></ul></nav></div></div></div><div id=searchbox></div><article class=bd-article><section class="tex2jax_ignore mathjax_ignore" id=exporting-deeptb-models-to-external-tools-pythtb><h1>Exporting DeePTB Models to External Tools (PythTB)<a title="Link to this heading" class=headerlink href=#exporting-deeptb-models-to-external-tools-pythtb>#</a></h1><p>DeePTB not only provides its own powerful training and analysis tools but also allows you to export your trained tight-binding models to popular external formats. This opens up compatibility with a vast ecosystem of post-processing tools.</p><p>In this tutorial, we will demonstrate:</p><ol class="arabic simple"><li><p><strong>DeePTB Native Analysis</strong>: Calculating band structure using DeePTB’s built-in tools.</p></li><li><p><strong>Safety Check</strong>: Verifying that the model is compatible with external tools (no overlap).</p></li><li><p><strong>Export</strong>: Converting the DeePTB model to a <strong>PythTB</strong> model object.</p></li><li><p><strong>PythTB Analysis</strong>: Calculating band structure with PythTB and comparing.</p></li></ol><section id=prerequisites><h2>Prerequisites<a title="Link to this heading" class=headerlink href=#prerequisites>#</a></h2><ul class=simple><li><p><code class="docutils literal notranslate"><span class=pre>dptb</span></code></p></li><li><p><code class="docutils literal notranslate"><span class=pre>pythtb</span></code></p></li><li><p><code class="docutils literal notranslate"><span class=pre>ase</span></code></p></li><li><p><code class="docutils literal notranslate"><span class=pre>matplotlib</span></code></p></li></ul><div class="cell docutils container"><div class="cell_input docutils container"><div class="highlight-ipython3 notranslate"><div class=highlight><pre><span></span><span class=kn>import</span><span class=w> </span><span class=nn>os</span>
<span class=kn>import</span><span class=w> </span><span class=nn>torch</span>
<span class=kn>from</span><span class=w> </span><span class=nn>dptb.nn</span><span class=w> </span><span class=kn>import</span> <span class=n>build_model</span>
<span class=kn>from</span><span class=w> </span><span class=nn>dptb.data</span><span class=w> </span><span class=kn>import</span> <span class=n>AtomicData</span>
<span class=kn>from</span><span class=w> </span><span class=nn>ase.io</span><span class=w> </span><span class=kn>import</span> <span class=n>read</span>
<span class=kn>from</span><span class=w> </span><span class=nn>dptb.postprocess.interfaces</span><span class=w> </span><span class=kn>import</span> <span class=n>ToWannier90</span><span class=p>,</span> <span class=n>ToPythTB</span>
<span class=kn>import</span><span class=w> </span><span class=nn>matplotlib.pyplot</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>plt</span>
<span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
<span class=kn>from</span><span class=w> </span><span class=nn>dptb.postprocess.bandstructure.band</span><span class=w> </span><span class=kn>import</span> <span class=n>Band</span>
</pre></div></div></div><div class="cell_output docutils container"><div class="output traceback highlight-ipythontb notranslate"><div class=highlight><pre><span></span><span class=gt>---------------------------------------------------------------------------</span>
<span class=ne>ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class=n>Cell</span> <span class=n>In</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>line</span> <span class=mi>2</span>
<span class="g g-Whitespace">      </span><span class=mi>1</span> <span class=kn>import</span><span class=w> </span><span class=nn>os</span>
<span class=ne>----> </span><span class=mi>2</span> <span class=kn>import</span><span class=w> </span><span class=nn>torch</span>
<span class="g g-Whitespace">      </span><span class=mi>3</span> <span class=kn>from</span><span class=w> </span><span class=nn>dptb.nn</span><span class=w> </span><span class=kn>import</span> <span class=n>build_model</span>
<span class="g g-Whitespace">      </span><span class=mi>4</span> <span class=kn>from</span><span class=w> </span><span class=nn>dptb.data</span><span class=w> </span><span class=kn>import</span> <span class=n>AtomicData</span>

<span class=ne>ModuleNotFoundError</span>: No module named 'torch'
</pre></div></div></div></div></section><section id=load-pre-trained-model><h2>1. Load Pre-trained Model<a title="Link to this heading" class=headerlink href=#load-pre-trained-model>#</a></h2><div class="cell docutils container"><div class="cell_input docutils container"><div class="highlight-ipython3 notranslate"><div class=highlight><pre><span></span><span class=c1># Define paths to example data</span>
<span class=n>root_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=s2>"path_to_DeePTB/examples/ToPythTB"</span><span class=p>)</span> 
<span class=n>model_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root_dir</span><span class=p>,</span> <span class=s2>"models"</span><span class=p>,</span> <span class=s2>"nnsk.ep20.pth"</span><span class=p>)</span>
<span class=n>struct_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root_dir</span><span class=p>,</span> <span class=s2>"silicon.vasp"</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Loading model from </span><span class=si>{</span><span class=n>model_path</span><span class=si>}</span><span class=s2>..."</span><span class=p>)</span>
<span class=n>model</span> <span class=o>=</span> <span class=n>build_model</span><span class=p>(</span><span class=n>model_path</span><span class=p>)</span>
<span class=n>model</span><span class=o>.</span><span class=n>eval</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>"Model loaded."</span><span class=p>)</span>
</pre></div></div></div><div class="cell_output docutils container"><div class="output stderr highlight-myst-ansi notranslate"><div class=highlight><pre><span></span>The model option atomic_radius in nnsk is not defined in input model_options, set to v1.
</pre></div></div><div class="output stream highlight-myst-ansi notranslate"><div class=highlight><pre><span></span>Loading model from /Users/aisiqg/Desktop/work/github/DeePTB/examples/ToPythTB/models/nnsk.ep20.pth...
Model loaded.
</pre></div></div></div></div></section><section id=deeptb-native-band-structure><h2>2. DeePTB Native Band Structure<a title="Link to this heading" class=headerlink href=#deeptb-native-band-structure>#</a></h2><p>First, we calculate the band structure using DeePTB’s <code class="docutils literal notranslate"><span class=pre>Band</span></code> class. This serves as our reference.</p><div class="cell docutils container"><div class="cell_input docutils container"><div class="highlight-ipython3 notranslate"><div class=highlight><pre><span></span><span class=c1># Configuration for Band Calculation</span>
<span class=n>jdata</span><span class=o>=</span><span class=p>{</span>   
    <span class=s2>"task_options"</span><span class=p>:</span> <span class=p>{</span>
        <span class=s2>"task"</span><span class=p>:</span> <span class=s2>"band"</span><span class=p>,</span>
        <span class=s2>"kline_type"</span><span class=p>:</span><span class=s2>"abacus"</span><span class=p>,</span>
        <span class=s2>"kpath"</span><span class=p>:[[</span><span class=mf>0.0000000000</span><span class=p>,</span>  <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>   
                <span class=p>[</span><span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>               
                <span class=p>[</span><span class=mf>0.6250000000</span><span class=p>,</span>   <span class=mf>0.2500000000</span><span class=p>,</span>   <span class=mf>0.6250000000</span><span class=p>,</span>   <span class=mi>1</span><span class=p>],</span>    
                <span class=p>[</span><span class=mf>0.3750000000</span><span class=p>,</span>   <span class=mf>0.3750000000</span><span class=p>,</span>   <span class=mf>0.7500000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>     
                <span class=p>[</span><span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>    
                <span class=p>[</span><span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>                
                <span class=p>[</span><span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.2500000000</span><span class=p>,</span>   <span class=mf>0.7500000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>               
                <span class=p>[</span><span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mi>1</span> <span class=p>]</span>
                <span class=p>],</span>
        <span class=s2>"klabels"</span><span class=p>:[</span><span class=s2>"G"</span><span class=p>,</span><span class=s2>"X"</span><span class=p>,</span><span class=s2>"X/U"</span><span class=p>,</span><span class=s2>"K"</span><span class=p>,</span><span class=s2>"G"</span><span class=p>,</span><span class=s2>"L"</span><span class=p>,</span><span class=s2>"W"</span><span class=p>,</span><span class=s2>"X"</span><span class=p>],</span>
        <span class=s2>"nel_atom"</span><span class=p>:{</span><span class=s2>"Si"</span><span class=p>:</span><span class=mi>4</span><span class=p>},</span>
        <span class=s2>"E_fermi"</span><span class=p>:</span><span class=o>-</span><span class=mf>4.722</span><span class=p>,</span>
        <span class=s2>"emin"</span><span class=p>:</span><span class=o>-</span><span class=mi>18</span><span class=p>,</span>
        <span class=s2>"emax"</span><span class=p>:</span><span class=mi>10</span><span class=p>,</span>
        <span class=s2>"ref_band"</span><span class=p>:</span> <span class=kc>None</span> 
    <span class=p>}</span>
<span class=p>}</span>
<span class=n>kpath_kwargs</span> <span class=o>=</span> <span class=n>jdata</span><span class=p>[</span><span class=s2>"task_options"</span><span class=p>]</span>

<span class=c1># Calculate Bands</span>
<span class=n>bcal</span> <span class=o>=</span> <span class=n>Band</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=n>model</span><span class=p>,</span> <span class=n>use_gui</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>device</span><span class=o>=</span><span class=n>model</span><span class=o>.</span><span class=n>device</span><span class=p>)</span> <span class=c1># use_gui=False for notebook</span>
<span class=n>eigens</span> <span class=o>=</span> <span class=n>bcal</span><span class=o>.</span><span class=n>get_bands</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>struct_path</span><span class=p>,</span> <span class=n>kpath_kwargs</span><span class=o>=</span><span class=n>kpath_kwargs</span><span class=p>)</span>

<span class=c1># Plot DeePTB Bands</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>"Plotting DeePTB Band Structure..."</span><span class=p>)</span>
<span class=n>bcal</span><span class=o>.</span><span class=n>band_plot</span><span class=p>(</span><span class=n>ref_band</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
               <span class=n>E_fermi</span> <span class=o>=</span> <span class=n>kpath_kwargs</span><span class=p>[</span><span class=s2>"E_fermi"</span><span class=p>],</span>
               <span class=n>emin</span> <span class=o>=</span> <span class=n>kpath_kwargs</span><span class=p>[</span><span class=s2>"emin"</span><span class=p>],</span>
               <span class=n>emax</span> <span class=o>=</span> <span class=n>kpath_kwargs</span><span class=p>[</span><span class=s2>"emax"</span><span class=p>])</span>
</pre></div></div></div><div class="cell_output docutils container"><div class="output stderr highlight-myst-ansi notranslate"><div class=highlight><pre><span></span>eig_solver is not set, using default 'torch'.
</pre></div></div><div class="output stream highlight-myst-ansi notranslate"><div class=highlight><pre><span></span>Plotting DeePTB Band Structure...
</pre></div></div><img alt=../../_images/0db277fb4034eb6b522ec98de27c606d832df6377cb359dfa6661d8e0ed60261.png src=../../_images/0db277fb4034eb6b522ec98de27c606d832df6377cb359dfa6661d8e0ed60261.png></div></div></section><section id=export-to-pythtb-and-verification><h2>3. Export to PythTB and Verification<a title="Link to this heading" class=headerlink href=#export-to-pythtb-and-verification>#</a></h2><p>Now we export the valid orthogonal model to PythTB and verify that the band structure matches.</p><div class="cell docutils container"><div class="cell_input docutils container"><div class="highlight-ipython3 notranslate"><div class=highlight><pre><span></span><span class=c1># Initialize Exporter</span>
<span class=n>exporter</span> <span class=o>=</span> <span class=n>ToPythTB</span><span class=p>(</span><span class=n>model</span><span class=p>)</span>

<span class=c1># Export to PythTB model object</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>"Exporting to PythTB..."</span><span class=p>)</span>
<span class=n>tb_model</span> <span class=o>=</span> <span class=n>exporter</span><span class=o>.</span><span class=n>get_model</span><span class=p>(</span><span class=n>struct_path</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>"Successfully exported!"</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>tb_model</span><span class=p>)</span>
</pre></div></div></div><div class="cell_output docutils container"><div class="output stream highlight-myst-ansi notranslate"><div class=highlight><pre><span></span>Exporting to PythTB...
Successfully exported!
&lt;pythtb.tb_model object at 0x368c1f400>
</pre></div></div></div></div><section id=calculate-and-plot-pythtb-bands><h3>Calculate and Plot PythTB Bands<a title="Link to this heading" class=headerlink href=#calculate-and-plot-pythtb-bands>#</a></h3><p>We use PythTB’s native methods to calculate the bands along the same k-path (approximate mapping) to verify consistency.</p><div class="cell docutils container"><div class="cell_input docutils container"><div class="highlight-ipython3 notranslate"><div class=highlight><pre><span></span><span class=c1># Define K-path in PythTB format (Si High Symmetry Points)</span>
<span class=c1># Gamma=(0,0,0), X=(0,0.5,0.5), L=(0.5,0.5,0.5), W=(0.25, 0.5, 0.75), K=(0.375, 0.375, 0.75)</span>
<span class=c1># Note: DeePTB and PythTB might define paths slightly differently, but critical points match.</span>

<span class=n>k_path_nodes</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>[</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span> <span class=c1># Gamma</span>
    <span class=p>[</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>],</span> <span class=c1># X</span>
    <span class=p>[</span><span class=mf>0.25</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.75</span><span class=p>],</span> <span class=c1># W</span>
    <span class=p>[</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span> <span class=c1># Gamma</span>
    <span class=p>[</span><span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>],</span> <span class=c1># L</span>
<span class=p>]</span>
<span class=n>k_path_labels</span> <span class=o>=</span> <span class=p>[</span><span class=sa>r</span><span class=s1>'$\Gamma$'</span><span class=p>,</span> <span class=s1>'X'</span><span class=p>,</span> <span class=s1>'W'</span><span class=p>,</span> <span class=sa>r</span><span class=s1>'$\Gamma$'</span><span class=p>,</span> <span class=s1>'L'</span><span class=p>]</span>

<span class=c1># Create k-path</span>
<span class=p>(</span><span class=n>k_vec</span><span class=p>,</span> <span class=n>k_dist</span><span class=p>,</span> <span class=n>k_node</span><span class=p>)</span> <span class=o>=</span> <span class=n>tb_model</span><span class=o>.</span><span class=n>k_path</span><span class=p>(</span><span class=n>k_path_nodes</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span>

<span class=c1># Solve for eigenvalues</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>"Solving with PythTB..."</span><span class=p>)</span>
<span class=n>evals</span> <span class=o>=</span> <span class=n>tb_model</span><span class=o>.</span><span class=n>solve_all</span><span class=p>(</span><span class=n>k_vec</span><span class=p>)</span>

<span class=c1># Plotting</span>
<span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=mi>6</span><span class=p>))</span>
<span class=c1># PythTB returns shape (num_orbitals, num_kpoints)</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>evals</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>]):</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>k_dist</span><span class=p>,</span> <span class=n>evals</span><span class=p>[</span><span class=n>i</span><span class=p>,:],</span> <span class=s1>'r-'</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=mf>1.5</span><span class=p>,</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.6</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=s1>'PythTB'</span> <span class=k>if</span> <span class=n>i</span><span class=o>==</span><span class=mi>0</span> <span class=k>else</span> <span class=s2>""</span><span class=p>)</span>

<span class=c1># Decorate</span>
<span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>k_node</span><span class=p>:</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>axvline</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>'k'</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=mf>0.5</span><span class=p>)</span>
<span class=n>ax</span><span class=o>.</span><span class=n>set_xticks</span><span class=p>(</span><span class=n>k_node</span><span class=p>)</span>
<span class=n>ax</span><span class=o>.</span><span class=n>set_xticklabels</span><span class=p>(</span><span class=n>k_path_labels</span><span class=p>)</span>
<span class=n>ax</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s2>"Energy (eV)"</span><span class=p>)</span>
<span class=n>ax</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>"PythTB Calculated Band Structure"</span><span class=p>)</span>
<span class=n>ax</span><span class=o>.</span><span class=n>grid</span><span class=p>(</span><span class=kc>True</span><span class=p>,</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.3</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</pre></div></div></div><div class="cell_output docutils container"><div class="output stream highlight-myst-ansi notranslate"><div class=highlight><pre><span></span>----- k_path report begin ----------
real-space lattice vectors
 [[0.    2.715 2.715]
 [2.715 0.    2.715]
 [2.715 2.715 0.   ]]
k-space metric tensor
 [[ 0.10175 -0.03392 -0.03392]
 [-0.03392  0.10175 -0.03392]
 [-0.03392 -0.03392  0.10175]]
internal coordinates of nodes
 [[0.   0.   0.  ]
 [0.   0.5  0.5 ]
 [0.25 0.5  0.75]
 [0.   0.   0.  ]
 [0.5  0.5  0.5 ]]
reciprocal-space lattice vectors
 [[-0.18416  0.18416  0.18416]
 [ 0.18416 -0.18416  0.18416]
 [ 0.18416  0.18416 -0.18416]]
cartesian coordinates of nodes
 [[0.00000e+00 0.00000e+00 0.00000e+00]
 [1.84162e-01 0.00000e+00 0.00000e+00]
 [1.84162e-01 9.20810e-02 6.93889e-18]
 [0.00000e+00 0.00000e+00 0.00000e+00]
 [9.20810e-02 9.20810e-02 9.20810e-02]]
list of segments:
  length = 0.18416  from  [0. 0. 0.]  to  [0.  0.5 0.5]
  length = 0.09208  from  [0.  0.5 0.5]  to  [0.25 0.5  0.75]
  length =  0.2059  from  [0.25 0.5  0.75]  to  [0. 0. 0.]
  length = 0.15949  from  [0. 0. 0.]  to  [0.5 0.5 0.5]
node distance list: [0.      0.18416 0.27624 0.48214 0.64163]
node index list:    [ 0 28 43 74 99]
----- k_path report end ------------

Solving with PythTB...
</pre></div></div><img alt=../../_images/af0bd8bdd302e165038a8958e5315261efe35188b744e1fc383a4868fe4174f2.png src=../../_images/af0bd8bdd302e165038a8958e5315261efe35188b744e1fc383a4868fe4174f2.png></div></div><div class="cell docutils container"><div class="cell_input docutils container"><div class="highlight-ipython3 notranslate"><div class=highlight><pre><span></span><span class=c1># Configuration for Band Calculation</span>
<span class=n>jdata</span><span class=o>=</span><span class=p>{</span>   
    <span class=s2>"task_options"</span><span class=p>:</span> <span class=p>{</span>
        <span class=s2>"task"</span><span class=p>:</span> <span class=s2>"band"</span><span class=p>,</span>
        <span class=s2>"kline_type"</span><span class=p>:</span><span class=s2>"abacus"</span><span class=p>,</span>
        <span class=s2>"kpath"</span><span class=p>:[[</span><span class=mf>0.0000000000</span><span class=p>,</span>  <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>   
                <span class=p>[</span><span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>               
                <span class=p>[</span><span class=mf>0.6250000000</span><span class=p>,</span>   <span class=mf>0.2500000000</span><span class=p>,</span>   <span class=mf>0.6250000000</span><span class=p>,</span>   <span class=mi>1</span><span class=p>],</span>    
                <span class=p>[</span><span class=mf>0.3750000000</span><span class=p>,</span>   <span class=mf>0.3750000000</span><span class=p>,</span>   <span class=mf>0.7500000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>     
                <span class=p>[</span><span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>    
                <span class=p>[</span><span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>                
                <span class=p>[</span><span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.2500000000</span><span class=p>,</span>   <span class=mf>0.7500000000</span><span class=p>,</span>   <span class=mi>50</span><span class=p>],</span>               
                <span class=p>[</span><span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mf>0.0000000000</span><span class=p>,</span>   <span class=mf>0.5000000000</span><span class=p>,</span>   <span class=mi>1</span> <span class=p>]</span>
                <span class=p>],</span>
        <span class=s2>"klabels"</span><span class=p>:[</span><span class=s2>"G"</span><span class=p>,</span><span class=s2>"X"</span><span class=p>,</span><span class=s2>"X/U"</span><span class=p>,</span><span class=s2>"K"</span><span class=p>,</span><span class=s2>"G"</span><span class=p>,</span><span class=s2>"L"</span><span class=p>,</span><span class=s2>"W"</span><span class=p>,</span><span class=s2>"X"</span><span class=p>],</span>
        <span class=s2>"nel_atom"</span><span class=p>:{</span><span class=s2>"Si"</span><span class=p>:</span><span class=mi>4</span><span class=p>},</span>
        <span class=s2>"E_fermi"</span><span class=p>:</span><span class=o>-</span><span class=mf>4.722</span><span class=p>,</span>
        <span class=s2>"emin"</span><span class=p>:</span><span class=o>-</span><span class=mi>18</span><span class=p>,</span>
        <span class=s2>"emax"</span><span class=p>:</span><span class=mi>10</span><span class=p>,</span>
        <span class=s2>"ref_band"</span><span class=p>:</span> <span class=kc>None</span> 
    <span class=p>}</span>
<span class=p>}</span>
<span class=n>kpath_kwargs</span> <span class=o>=</span> <span class=n>jdata</span><span class=p>[</span><span class=s2>"task_options"</span><span class=p>]</span>

<span class=c1># Calculate Bands</span>
<span class=n>bcal</span> <span class=o>=</span> <span class=n>Band</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=n>model</span><span class=p>,</span> <span class=n>use_gui</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>device</span><span class=o>=</span><span class=n>model</span><span class=o>.</span><span class=n>device</span><span class=p>)</span> <span class=c1># use_gui=False for notebook</span>
<span class=n>eigens</span> <span class=o>=</span> <span class=n>bcal</span><span class=o>.</span><span class=n>get_bands</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>struct_path</span><span class=p>,</span> <span class=n>kpath_kwargs</span><span class=o>=</span><span class=n>kpath_kwargs</span><span class=p>)</span>

<span class=c1># Plot DeePTB Bands</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>"Plotting DeePTB Band Structure..."</span><span class=p>)</span>
<span class=n>bcal</span><span class=o>.</span><span class=n>band_plot</span><span class=p>(</span><span class=n>ref_band</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
               <span class=n>E_fermi</span> <span class=o>=</span> <span class=n>kpath_kwargs</span><span class=p>[</span><span class=s2>"E_fermi"</span><span class=p>],</span>
               <span class=n>emin</span> <span class=o>=</span> <span class=n>kpath_kwargs</span><span class=p>[</span><span class=s2>"emin"</span><span class=p>],</span>
               <span class=n>emax</span> <span class=o>=</span> <span class=n>kpath_kwargs</span><span class=p>[</span><span class=s2>"emax"</span><span class=p>])</span>
</pre></div></div></div><div class="cell_output docutils container"><div class="output stderr highlight-myst-ansi notranslate"><div class=highlight><pre><span></span>eig_solver is not set, using default 'torch'.
</pre></div></div><div class="output stream highlight-myst-ansi notranslate"><div class=highlight><pre><span></span>Plotting DeePTB Band Structure...
</pre></div></div><img alt=../../_images/0db277fb4034eb6b522ec98de27c606d832df6377cb359dfa6661d8e0ed60261.png src=../../_images/0db277fb4034eb6b522ec98de27c606d832df6377cb359dfa6661d8e0ed60261.png></div></div></section></section><section id=pythtb-deeptb-k><h2>PythTB计算能带，使用DeePTB内置的 k点<a title="Link to this heading" class=headerlink href=#pythtb-deeptb-k>#</a></h2><div class="cell docutils container"><div class="cell_input docutils container"><div class="highlight-ipython3 notranslate"><div class=highlight><pre><span></span><span class=n>evals</span> <span class=o>=</span> <span class=n>tb_model</span><span class=o>.</span><span class=n>solve_all</span><span class=p>(</span><span class=n>eigens</span><span class=p>[</span><span class=s1>'klist'</span><span class=p>])</span>
</pre></div></div></div></div><div class="cell docutils container"><div class="cell_input docutils container"><div class="highlight-ipython3 notranslate"><div class=highlight><pre><span></span><span class=n>refeig</span> <span class=o>=</span> <span class=n>evals</span><span class=p>[:,:]</span><span class=o>.</span><span class=n>T</span>
<span class=n>plt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>eigens</span><span class=p>[</span><span class=s1>'xlist'</span><span class=p>],</span><span class=n>refeig</span> <span class=o>-</span> <span class=n>refeig</span><span class=o>.</span><span class=n>min</span><span class=p>()</span> <span class=p>,</span><span class=s1>'r'</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>eigens</span><span class=p>[</span><span class=s1>'xlist'</span><span class=p>],</span><span class=n>eigens</span><span class=p>[</span><span class=s1>'eigenvalues'</span><span class=p>]</span><span class=o>-</span><span class=n>eigens</span><span class=p>[</span><span class=s1>'eigenvalues'</span><span class=p>]</span><span class=o>.</span><span class=n>min</span><span class=p>(),</span><span class=s1>'b--'</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</pre></div></div></div><div class="cell_output docutils container"><img alt=../../_images/58827ddc261ec3ff9ff4c25bee2beb6a65dae10400017a57cbcf73bc142c1bea.png src=../../_images/58827ddc261ec3ff9ff4c25bee2beb6a65dae10400017a57cbcf73bc142c1bea.png></div></div><p><strong>现在DeePTB完成了与 PythTB 的对接，你可以基于PythTB进行一些性质计算</strong></p><p>要深入了解 PythTB 的使用，请参考其官方文档，其中包含详细的安装指南、API 参考和教程：<a class="reference external" href=https://www.physics.rutgers.edu/pythtb/>官方文档</a></p></section></section></article><footer class="prev-next-footer d-print-none"><div class=prev-next-area><a title="previous page" class=left-prev href=basic_api.html> <i class="fa-solid fa-angle-left"></i> <div class=prev-next-info><p class=prev-next-subtitle>previous</p><p class=prev-next-title>Basic API</p></div> </a><a title="next page" class=right-next href=wan90_api.html> <div class=prev-next-info><p class=prev-next-subtitle>next</p><p class=prev-next-title>Export DeePTB to Wannier90 files</p></div> <i class="fa-solid fa-angle-right"></i> </a></div></footer></div><div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner"><div class=sidebar-secondary-item><div class="page-toc tocsection onthispage"><i class="fa-solid fa-list"></i> Contents</div><nav class="bd-toc-nav page-toc"><ul class="visible nav section-nav flex-column"><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#prerequisites>Prerequisites</a></li><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#load-pre-trained-model>1. Load Pre-trained Model</a></li><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#deeptb-native-band-structure>2. DeePTB Native Band Structure</a></li><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#export-to-pythtb-and-verification>3. Export to PythTB and Verification</a><ul class="nav section-nav flex-column"><li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href=#calculate-and-plot-pythtb-bands>Calculate and Plot PythTB Bands</a></li></ul></li><li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href=#pythtb-deeptb-k>PythTB计算能带，使用DeePTB内置的 k点</a></li></ul></nav></div></div></div></div><footer class=bd-footer-content><div class="bd-footer-content__inner container"><div class=footer-item><p class=component-author>By DeePTB</p></div><div class=footer-item><p class=copyright>© Copyright 2023, DeePTB. <br></p></div><div class=footer-item></div><div class=footer-item><div class=extra_footer><p><a href=https://beian.miit.gov.cn target=_blank>京ICP备20010051号-8</a></p></div></div></div></footer></main></div></div><script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script><script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script><footer class=bd-footer></footer></body></html>